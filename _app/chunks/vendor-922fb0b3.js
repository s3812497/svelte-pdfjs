var Xt=Object.defineProperty;var Yt=(d,n,k)=>n in d?Xt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:k}):d[n]=k;var jt=(d,n,k)=>(Yt(d,typeof n!="symbol"?n+"":n,k),k),Gt=(d,n,k)=>{if(!n.has(d))throw TypeError("Cannot "+k)};var pt=(d,n,k)=>(Gt(d,n,"read from private field"),k?k.call(d):n.get(d)),Pt=(d,n,k)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,k)},Et=(d,n,k,s)=>(Gt(d,n,"write to private field"),s?s.call(d,k):n.set(d,k),k);var Dt=(d,n,k)=>(Gt(d,n,"access private method"),k);function noop(){}function assign(d,n){for(const k in n)d[k]=n[k];return d}function is_promise(d){return d&&typeof d=="object"&&typeof d.then=="function"}function run(d){return d()}function blank_object(){return Object.create(null)}function run_all(d){d.forEach(run)}function is_function(d){return typeof d=="function"}function safe_not_equal(d,n){return d!=d?n==n:d!==n||d&&typeof d=="object"||typeof d=="function"}function not_equal(d,n){return d!=d?n==n:d!==n}function is_empty(d){return Object.keys(d).length===0}function subscribe(d,...n){if(d==null)return noop;const k=d.subscribe(...n);return k.unsubscribe?()=>k.unsubscribe():k}function component_subscribe(d,n,k){d.$$.on_destroy.push(subscribe(n,k))}function create_slot(d,n,k,s){if(d){const B=get_slot_context(d,n,k,s);return d[0](B)}}function get_slot_context(d,n,k,s){return d[1]&&s?assign(k.ctx.slice(),d[1](s(n))):k.ctx}function get_slot_changes(d,n,k,s){if(d[2]&&s){const B=d[2](s(k));if(n.dirty===void 0)return B;if(typeof B=="object"){const U=[],H=Math.max(n.dirty.length,B.length);for(let O=0;O<H;O+=1)U[O]=n.dirty[O]|B[O];return U}return n.dirty|B}return n.dirty}function update_slot_base(d,n,k,s,B,U){if(B){const H=get_slot_context(n,k,s,U);d.p(H,B)}}function get_all_dirty_from_scope(d){if(d.ctx.length>32){const n=[],k=d.ctx.length/32;for(let s=0;s<k;s++)n[s]=-1;return n}return-1}let is_hydrating=!1;function start_hydrating(){is_hydrating=!0}function end_hydrating(){is_hydrating=!1}function upper_bound(d,n,k,s){for(;d<n;){const B=d+(n-d>>1);k(B)<=s?d=B+1:n=B}return d}function init_hydrate(d){if(d.hydrate_init)return;d.hydrate_init=!0;let n=d.childNodes;if(d.nodeName==="HEAD"){const b=[];for(let e=0;e<n.length;e++){const c=n[e];c.claim_order!==void 0&&b.push(c)}n=b}const k=new Int32Array(n.length+1),s=new Int32Array(n.length);k[0]=-1;let B=0;for(let b=0;b<n.length;b++){const e=n[b].claim_order,c=(B>0&&n[k[B]].claim_order<=e?B+1:upper_bound(1,B,g=>n[k[g]].claim_order,e))-1;s[b]=k[c]+1;const a=c+1;k[a]=b,B=Math.max(a,B)}const U=[],H=[];let O=n.length-1;for(let b=k[B]+1;b!=0;b=s[b-1]){for(U.push(n[b-1]);O>=b;O--)H.push(n[O]);O--}for(;O>=0;O--)H.push(n[O]);U.reverse(),H.sort((b,e)=>b.claim_order-e.claim_order);for(let b=0,e=0;b<H.length;b++){for(;e<U.length&&H[b].claim_order>=U[e].claim_order;)e++;const c=e<U.length?U[e]:null;d.insertBefore(H[b],c)}}function append_hydration(d,n){if(is_hydrating){for(init_hydrate(d),(d.actual_end_child===void 0||d.actual_end_child!==null&&d.actual_end_child.parentElement!==d)&&(d.actual_end_child=d.firstChild);d.actual_end_child!==null&&d.actual_end_child.claim_order===void 0;)d.actual_end_child=d.actual_end_child.nextSibling;n!==d.actual_end_child?(n.claim_order!==void 0||n.parentNode!==d)&&d.insertBefore(n,d.actual_end_child):d.actual_end_child=n.nextSibling}else(n.parentNode!==d||n.nextSibling!==null)&&d.appendChild(n)}function insert_hydration(d,n,k){is_hydrating&&!k?append_hydration(d,n):(n.parentNode!==d||n.nextSibling!=k)&&d.insertBefore(n,k||null)}function detach(d){d.parentNode.removeChild(d)}function destroy_each(d,n){for(let k=0;k<d.length;k+=1)d[k]&&d[k].d(n)}function element(d){return document.createElement(d)}function text(d){return document.createTextNode(d)}function space(){return text(" ")}function empty(){return text("")}function listen(d,n,k,s){return d.addEventListener(n,k,s),()=>d.removeEventListener(n,k,s)}function attr(d,n,k){k==null?d.removeAttribute(n):d.getAttribute(n)!==k&&d.setAttribute(n,k)}function to_number(d){return d===""?null:+d}function children(d){return Array.from(d.childNodes)}function init_claim_info(d){d.claim_info===void 0&&(d.claim_info={last_index:0,total_claimed:0})}function claim_node(d,n,k,s,B=!1){init_claim_info(d);const U=(()=>{for(let H=d.claim_info.last_index;H<d.length;H++){const O=d[H];if(n(O)){const b=k(O);return b===void 0?d.splice(H,1):d[H]=b,B||(d.claim_info.last_index=H),O}}for(let H=d.claim_info.last_index-1;H>=0;H--){const O=d[H];if(n(O)){const b=k(O);return b===void 0?d.splice(H,1):d[H]=b,B?b===void 0&&d.claim_info.last_index--:d.claim_info.last_index=H,O}}return s()})();return U.claim_order=d.claim_info.total_claimed,d.claim_info.total_claimed+=1,U}function claim_element_base(d,n,k,s){return claim_node(d,B=>B.nodeName===n,B=>{const U=[];for(let H=0;H<B.attributes.length;H++){const O=B.attributes[H];k[O.name]||U.push(O.name)}U.forEach(H=>B.removeAttribute(H))},()=>s(n))}function claim_element(d,n,k){return claim_element_base(d,n,k,element)}function claim_text(d,n){return claim_node(d,k=>k.nodeType===3,k=>{const s=""+n;if(k.data.startsWith(s)){if(k.data.length!==s.length)return k.splitText(s.length)}else k.data=s},()=>text(n),!0)}function claim_space(d){return claim_text(d," ")}function set_data(d,n){n=""+n,d.wholeText!==n&&(d.data=n)}function set_input_value(d,n){d.value=n==null?"":n}function set_style(d,n,k,s){k===null?d.style.removeProperty(n):d.style.setProperty(n,k,s?"important":"")}function custom_event(d,n,k=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(d,k,!1,n),s}let current_component;function set_current_component(d){current_component=d}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(d){get_current_component().$$.on_mount.push(d)}function afterUpdate(d){get_current_component().$$.after_update.push(d)}function onDestroy(d){get_current_component().$$.on_destroy.push(d)}function createEventDispatcher(){const d=get_current_component();return(n,k)=>{const s=d.$$.callbacks[n];if(s){const B=custom_event(n,k);s.slice().forEach(U=>{U.call(d,B)})}}}function setContext(d,n){get_current_component().$$.context.set(d,n)}function getContext(d){return get_current_component().$$.context.get(d)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(d){render_callbacks.push(d)}const seen_callbacks=new Set;let flushidx=0;function flush(){const d=current_component;do{for(;flushidx<dirty_components.length;){const n=dirty_components[flushidx];flushidx++,set_current_component(n),update(n.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let n=0;n<render_callbacks.length;n+=1){const k=render_callbacks[n];seen_callbacks.has(k)||(seen_callbacks.add(k),k())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(d)}function update(d){if(d.fragment!==null){d.update(),run_all(d.before_update);const n=d.dirty;d.dirty=[-1],d.fragment&&d.fragment.p(d.ctx,n),d.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(d,n){d&&d.i&&(outroing.delete(d),d.i(n))}function transition_out(d,n,k,s){if(d&&d.o){if(outroing.has(d))return;outroing.add(d),outros.c.push(()=>{outroing.delete(d),s&&(k&&d.d(1),s())}),d.o(n)}}function handle_promise(d,n){const k=n.token={};function s(B,U,H,O){if(n.token!==k)return;n.resolved=O;let b=n.ctx;H!==void 0&&(b=b.slice(),b[H]=O);const e=B&&(n.current=B)(b);let c=!1;n.block&&(n.blocks?n.blocks.forEach((a,g)=>{g!==U&&a&&(group_outros(),transition_out(a,1,1,()=>{n.blocks[g]===a&&(n.blocks[g]=null)}),check_outros())}):n.block.d(1),e.c(),transition_in(e,1),e.m(n.mount(),n.anchor),c=!0),n.block=e,n.blocks&&(n.blocks[U]=e),c&&flush()}if(is_promise(d)){const B=get_current_component();if(d.then(U=>{set_current_component(B),s(n.then,1,n.value,U),set_current_component(null)},U=>{if(set_current_component(B),s(n.catch,2,n.error,U),set_current_component(null),!n.hasCatch)throw U}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,d),!0;n.resolved=d}}function update_await_block_branch(d,n,k){const s=n.slice(),{resolved:B}=d;d.current===d.then&&(s[d.value]=B),d.current===d.catch&&(s[d.error]=B),d.block.p(s,k)}function get_spread_update(d,n){const k={},s={},B={$$scope:1};let U=d.length;for(;U--;){const H=d[U],O=n[U];if(O){for(const b in H)b in O||(s[b]=1);for(const b in O)B[b]||(k[b]=O[b],B[b]=1);d[U]=O}else for(const b in H)B[b]=1}for(const H in s)H in k||(k[H]=void 0);return k}function get_spread_object(d){return typeof d=="object"&&d!==null?d:{}}function create_component(d){d&&d.c()}function claim_component(d,n){d&&d.l(n)}function mount_component(d,n,k,s){const{fragment:B,on_mount:U,on_destroy:H,after_update:O}=d.$$;B&&B.m(n,k),s||add_render_callback(()=>{const b=U.map(run).filter(is_function);H?H.push(...b):run_all(b),d.$$.on_mount=[]}),O.forEach(add_render_callback)}function destroy_component(d,n){const k=d.$$;k.fragment!==null&&(run_all(k.on_destroy),k.fragment&&k.fragment.d(n),k.on_destroy=k.fragment=null,k.ctx=[])}function make_dirty(d,n){d.$$.dirty[0]===-1&&(dirty_components.push(d),schedule_update(),d.$$.dirty.fill(0)),d.$$.dirty[n/31|0]|=1<<n%31}function init(d,n,k,s,B,U,H,O=[-1]){const b=current_component;set_current_component(d);const e=d.$$={fragment:null,ctx:null,props:U,update:noop,not_equal:B,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(b?b.$$.context:[])),callbacks:blank_object(),dirty:O,skip_bound:!1,root:n.target||b.$$.root};H&&H(e.root);let c=!1;if(e.ctx=k?k(d,n.props||{},(a,g,...p)=>{const R=p.length?p[0]:g;return e.ctx&&B(e.ctx[a],e.ctx[a]=R)&&(!e.skip_bound&&e.bound[a]&&e.bound[a](R),c&&make_dirty(d,a)),g}):[],e.update(),c=!0,run_all(e.before_update),e.fragment=s?s(e.ctx):!1,n.target){if(n.hydrate){start_hydrating();const a=children(n.target);e.fragment&&e.fragment.l(a),a.forEach(detach)}else e.fragment&&e.fragment.c();n.intro&&transition_in(d.$$.fragment),mount_component(d,n.target,n.anchor,n.customElement),end_hydrating(),flush()}set_current_component(b)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(n,k){const s=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return s.push(k),()=>{const B=s.indexOf(k);B!==-1&&s.splice(B,1)}}$set(n){this.$$set&&!is_empty(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const subscriber_queue=[];function readable(d,n){return{subscribe:writable(d,n).subscribe}}function writable(d,n=noop){let k;const s=new Set;function B(O){if(safe_not_equal(d,O)&&(d=O,k)){const b=!subscriber_queue.length;for(const e of s)e[1](),subscriber_queue.push(e,d);if(b){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}function U(O){B(O(d))}function H(O,b=noop){const e=[O,b];return s.add(e),s.size===1&&(k=n(B)||noop),O(d),()=>{s.delete(e),s.size===0&&(k(),k=null)}}return{set:B,update:U,subscribe:H}}var workerSrc="/svelte-pdfjs/_app/assets/pdf.worker.min-38b21047.js",commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(d){if(d.__esModule)return d;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(d).forEach(function(k){var s=Object.getOwnPropertyDescriptor(d,k);Object.defineProperty(n,k,s.get?s:{enumerable:!0,get:function(){return d[k]}})}),n}function commonjsRequire(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(n,k){module.exports=k()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.UNSUPPORTED_FEATURES=n.TextRenderingMode=n.StreamType=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.IsLittleEndianCached=n.IsEvalSupportedCached=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FontType=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.arrayByteLength=z,n.arraysToBytes=K,n.assert=A,n.bytesToString=I,n.createPromiseCapability=zt,n.createValidAbsoluteUrl=u,n.escapeString=mt,n.getModificationDate=Vt,n.getVerbosityLevel=V,n.info=Y,n.isArrayBuffer=Tt,n.isArrayEqual=Ut,n.isAscii=vt,n.isSameOrigin=o,n.objectFromMap=et,n.objectSize=nt,n.setVerbosityLevel=X,n.shadow=S,n.string32=Z,n.stringToBytes=W,n.stringToPDFString=Ct,n.stringToUTF16BEString=bt,n.stringToUTF8String=St,n.unreachable=Q,n.utf8StringToString=ft,n.warn=tt,k(2);const s=[1,0,0,1,0,0];n.IDENTITY_MATRIX=s;const B=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=B;const U={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=U;const H={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=H;const O={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=O;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=b;const e={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=e;const c={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=c;const a={MARKED:"Marked",REVIEW:"Review"};n.AnnotationStateModelType=a;const g={MARKED:"Marked",UNMARKED:"Unmarked"};n.AnnotationMarkedState=g;const p={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};n.AnnotationReviewState=p;const R={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=R;const w={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=w;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=_;const G={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=G;const j={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=j;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=D;const T={O:"PageOpen",C:"PageClose"};n.PageActionEventType=T;const r={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};n.StreamType=r;const l={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};n.FontType=l;const x={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=x;const F={NONE:0,BINARY:1,STREAM:2};n.CMapCompressionType=F;const C={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=C;const L={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};n.UNSUPPORTED_FEATURES=L;const E={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=E;let N=x.WARNINGS;function X(J){Number.isInteger(J)&&(N=J)}function V(){return N}function Y(J){N>=x.INFOS&&console.log(`Info: ${J}`)}function tt(J){N>=x.WARNINGS&&console.log(`Warning: ${J}`)}function Q(J){throw new Error(J)}function A(J,q){J||Q(q)}function o(J,q){let $;try{if($=new URL(J),!$.origin||$.origin==="null")return!1}catch{return!1}const rt=new URL(q,$);return $.origin===rt.origin}function i(J){if(!J)return!1;switch(J.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u(J,q=null,$=null){if(!J)return null;try{if($&&typeof J=="string"){if($.addDefaultProtocol&&J.startsWith("www.")){const at=J.match(/\./g);at&&at.length>=2&&(J=`http://${J}`)}if($.tryConvertEncoding)try{J=St(J)}catch{}}const rt=q?new URL(J,q):new URL(J);if(i(rt))return rt}catch{}return null}function S(J,q,$){return Object.defineProperty(J,q,{value:$,enumerable:!0,configurable:!0,writable:!1}),$}const v=function(){function q($,rt){this.constructor===q&&Q("Cannot initialize BaseException."),this.message=$,this.name=rt}return q.prototype=new Error,q.constructor=q,q}();n.BaseException=v;class P extends v{constructor(q,$){super(q,"PasswordException");this.code=$}}n.PasswordException=P;class t extends v{constructor(q,$){super(q,"UnknownErrorException");this.details=$}}n.UnknownErrorException=t;class f extends v{constructor(q){super(q,"InvalidPDFException")}}n.InvalidPDFException=f;class m extends v{constructor(q){super(q,"MissingPDFException")}}n.MissingPDFException=m;class y extends v{constructor(q,$){super(q,"UnexpectedResponseException");this.status=$}}n.UnexpectedResponseException=y;class h extends v{constructor(q){super(q,"FormatError")}}n.FormatError=h;class M extends v{constructor(q){super(q,"AbortException")}}n.AbortException=M;function I(J){(typeof J!="object"||J===null||J.length===void 0)&&Q("Invalid argument for bytesToString");const q=J.length,$=8192;if(q<$)return String.fromCharCode.apply(null,J);const rt=[];for(let at=0;at<q;at+=$){const ht=Math.min(at+$,q),ut=J.subarray(at,ht);rt.push(String.fromCharCode.apply(null,ut))}return rt.join("")}function W(J){typeof J!="string"&&Q("Invalid argument for stringToBytes");const q=J.length,$=new Uint8Array(q);for(let rt=0;rt<q;++rt)$[rt]=J.charCodeAt(rt)&255;return $}function z(J){if(J.length!==void 0)return J.length;if(J.byteLength!==void 0)return J.byteLength;Q("Invalid argument for arrayByteLength")}function K(J){const q=J.length;if(q===1&&J[0]instanceof Uint8Array)return J[0];let $=0;for(let ht=0;ht<q;ht++)$+=z(J[ht]);let rt=0;const at=new Uint8Array($);for(let ht=0;ht<q;ht++){let ut=J[ht];ut instanceof Uint8Array||(typeof ut=="string"?ut=W(ut):ut=new Uint8Array(ut));const xt=ut.byteLength;at.set(ut,rt),rt+=xt}return at}function Z(J){return String.fromCharCode(J>>24&255,J>>16&255,J>>8&255,J&255)}function nt(J){return Object.keys(J).length}function et(J){const q=Object.create(null);for(const[$,rt]of J)q[$]=rt;return q}function st(){const J=new Uint8Array(4);return J[0]=1,new Uint32Array(J.buffer,0,1)[0]===1}const lt={get value(){return S(this,"value",st())}};n.IsLittleEndianCached=lt;function it(){try{return new Function(""),!0}catch{return!1}}const ot={get value(){return S(this,"value",it())}};n.IsEvalSupportedCached=ot;const ct=[...Array(256).keys()].map(J=>J.toString(16).padStart(2,"0"));class dt{static makeHexColor(q,$,rt){return`#${ct[q]}${ct[$]}${ct[rt]}`}static transform(q,$){return[q[0]*$[0]+q[2]*$[1],q[1]*$[0]+q[3]*$[1],q[0]*$[2]+q[2]*$[3],q[1]*$[2]+q[3]*$[3],q[0]*$[4]+q[2]*$[5]+q[4],q[1]*$[4]+q[3]*$[5]+q[5]]}static applyTransform(q,$){const rt=q[0]*$[0]+q[1]*$[2]+$[4],at=q[0]*$[1]+q[1]*$[3]+$[5];return[rt,at]}static applyInverseTransform(q,$){const rt=$[0]*$[3]-$[1]*$[2],at=(q[0]*$[3]-q[1]*$[2]+$[2]*$[5]-$[4]*$[3])/rt,ht=(-q[0]*$[1]+q[1]*$[0]+$[4]*$[1]-$[5]*$[0])/rt;return[at,ht]}static getAxialAlignedBoundingBox(q,$){const rt=dt.applyTransform(q,$),at=dt.applyTransform(q.slice(2,4),$),ht=dt.applyTransform([q[0],q[3]],$),ut=dt.applyTransform([q[2],q[1]],$);return[Math.min(rt[0],at[0],ht[0],ut[0]),Math.min(rt[1],at[1],ht[1],ut[1]),Math.max(rt[0],at[0],ht[0],ut[0]),Math.max(rt[1],at[1],ht[1],ut[1])]}static inverseTransform(q){const $=q[0]*q[3]-q[1]*q[2];return[q[3]/$,-q[1]/$,-q[2]/$,q[0]/$,(q[2]*q[5]-q[4]*q[3])/$,(q[4]*q[1]-q[5]*q[0])/$]}static apply3dTransform(q,$){return[q[0]*$[0]+q[1]*$[1]+q[2]*$[2],q[3]*$[0]+q[4]*$[1]+q[5]*$[2],q[6]*$[0]+q[7]*$[1]+q[8]*$[2]]}static singularValueDecompose2dScale(q){const $=[q[0],q[2],q[1],q[3]],rt=q[0]*$[0]+q[1]*$[2],at=q[0]*$[1]+q[1]*$[3],ht=q[2]*$[0]+q[3]*$[2],ut=q[2]*$[1]+q[3]*$[3],xt=(rt+ut)/2,wt=Math.sqrt((rt+ut)**2-4*(rt*ut-ht*at))/2,Ft=xt+wt||1,At=xt-wt||1;return[Math.sqrt(Ft),Math.sqrt(At)]}static normalizeRect(q){const $=q.slice(0);return q[0]>q[2]&&($[0]=q[2],$[2]=q[0]),q[1]>q[3]&&($[1]=q[3],$[3]=q[1]),$}static intersect(q,$){function rt(xt,wt){return xt-wt}const at=[q[0],q[2],$[0],$[2]].sort(rt),ht=[q[1],q[3],$[1],$[3]].sort(rt),ut=[];if(q=dt.normalizeRect(q),$=dt.normalizeRect($),at[0]===q[0]&&at[1]===$[0]||at[0]===$[0]&&at[1]===q[0])ut[0]=at[1],ut[2]=at[2];else return null;if(ht[0]===q[1]&&ht[1]===$[1]||ht[0]===$[1]&&ht[1]===q[1])ut[1]=ht[1],ut[3]=ht[2];else return null;return ut}static bezierBoundingBox(q,$,rt,at,ht,ut,xt,wt){const Ft=[],At=[[],[]];let Rt,kt,Lt,gt,It,Nt,Bt,qt;for(let Wt=0;Wt<2;++Wt){if(Wt===0?(kt=6*q-12*rt+6*ht,Rt=-3*q+9*rt-9*ht+3*xt,Lt=3*rt-3*q):(kt=6*$-12*at+6*ut,Rt=-3*$+9*at-9*ut+3*wt,Lt=3*at-3*$),Math.abs(Rt)<1e-12){if(Math.abs(kt)<1e-12)continue;gt=-Lt/kt,0<gt&&gt<1&&Ft.push(gt);continue}Bt=kt*kt-4*Lt*Rt,qt=Math.sqrt(Bt),!(Bt<0)&&(It=(-kt+qt)/(2*Rt),0<It&&It<1&&Ft.push(It),Nt=(-kt-qt)/(2*Rt),0<Nt&&Nt<1&&Ft.push(Nt))}let Mt=Ft.length,yt;const Ot=Mt;for(;Mt--;)gt=Ft[Mt],yt=1-gt,At[0][Mt]=yt*yt*yt*q+3*yt*yt*gt*rt+3*yt*gt*gt*ht+gt*gt*gt*xt,At[1][Mt]=yt*yt*yt*$+3*yt*yt*gt*at+3*yt*gt*gt*ut+gt*gt*gt*wt;return At[0][Ot]=q,At[1][Ot]=$,At[0][Ot+1]=xt,At[1][Ot+1]=wt,At[0].length=At[1].length=Ot+2,[Math.min(...At[0]),Math.min(...At[1]),Math.max(...At[0]),Math.max(...At[1])]}}n.Util=dt;const _t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ct(J){if(J[0]>="\xEF"){let $;if(J[0]==="\xFE"&&J[1]==="\xFF"?$="utf-16be":J[0]==="\xFF"&&J[1]==="\xFE"?$="utf-16le":J[0]==="\xEF"&&J[1]==="\xBB"&&J[2]==="\xBF"&&($="utf-8"),$)try{const rt=new TextDecoder($,{fatal:!0}),at=W(J);return rt.decode(at)}catch(rt){tt(`stringToPDFString: "${rt}".`)}}const q=[];for(let $=0,rt=J.length;$<rt;$++){const at=_t[J.charCodeAt($)];q.push(at?String.fromCharCode(at):J.charAt($))}return q.join("")}function mt(J){return J.replace(/([()\\\n\r])/g,q=>q===`
`?"\\n":q==="\r"?"\\r":`\\${q}`)}function vt(J){return/^[\x00-\x7F]*$/.test(J)}function bt(J){const q=["\xFE\xFF"];for(let $=0,rt=J.length;$<rt;$++){const at=J.charCodeAt($);q.push(String.fromCharCode(at>>8&255),String.fromCharCode(at&255))}return q.join("")}function St(J){return decodeURIComponent(escape(J))}function ft(J){return unescape(encodeURIComponent(J))}function Tt(J){return typeof J=="object"&&J!==null&&J.byteLength!==void 0}function Ut(J,q){if(J.length!==q.length)return!1;for(let $=0,rt=J.length;$<rt;$++)if(J[$]!==q[$])return!1;return!0}function Vt(J=new Date){return[J.getUTCFullYear().toString(),(J.getUTCMonth()+1).toString().padStart(2,"0"),J.getUTCDate().toString().padStart(2,"0"),J.getUTCHours().toString().padStart(2,"0"),J.getUTCMinutes().toString().padStart(2,"0"),J.getUTCSeconds().toString().padStart(2,"0")].join("")}function zt(){const J=Object.create(null);let q=!1;return Object.defineProperty(J,"settled",{get(){return q}}),J.promise=new Promise(function($,rt){J.resolve=function(at){q=!0,$(at)},J.reject=function(at){q=!0,rt(at)}}),J}},(d,n,k)=>{k(3)},(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;const k=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=k},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var d,n,k,s,B,U,H,Ht;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(b){createPDFNetworkStream=b}function getDocument(b){const e=new PDFDocumentLoadingTask;let c;if(typeof b=="string"||b instanceof URL)c={url:b};else if((0,_util.isArrayBuffer)(b))c={data:b};else if(b instanceof PDFDataRangeTransport)c={range:b};else{if(typeof b!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");c=b}const a=Object.create(null);let g=null,p=null;for(const w in c){const _=c[w];switch(w){case"url":if(typeof window!="undefined")try{a[w]=new URL(_,window.location).href;continue}catch(G){(0,_util.warn)(`Cannot create valid URL: "${G}".`)}else if(typeof _=="string"||_ instanceof URL){a[w]=_.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":g=_;continue;case"worker":p=_;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&_ instanceof Buffer)a[w]=new Uint8Array(_);else{if(_ instanceof Uint8Array)break;if(typeof _=="string")a[w]=(0,_util.stringToBytes)(_);else if(typeof _=="object"&&_!==null&&!isNaN(_.length))a[w]=new Uint8Array(_);else if((0,_util.isArrayBuffer)(_))a[w]=new Uint8Array(_);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}a[w]=_}if(a.rangeChunkSize=a.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,a.CMapReaderFactory=a.CMapReaderFactory||DefaultCMapReaderFactory,a.StandardFontDataFactory=a.StandardFontDataFactory||DefaultStandardFontDataFactory,a.ignoreErrors=a.stopAtErrors!==!0,a.fontExtraProperties=a.fontExtraProperties===!0,a.pdfBug=a.pdfBug===!0,a.enableXfa=a.enableXfa===!0,(typeof a.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(a.docBaseUrl))&&(a.docBaseUrl=null),Number.isInteger(a.maxImageSize)||(a.maxImageSize=-1),typeof a.useWorkerFetch!="boolean"&&(a.useWorkerFetch=a.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&a.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof a.isEvalSupported!="boolean"&&(a.isEvalSupported=!0),typeof a.disableFontFace!="boolean"&&(a.disableFontFace=_is_node.isNodeJS),typeof a.useSystemFonts!="boolean"&&(a.useSystemFonts=!_is_node.isNodeJS&&!a.disableFontFace),typeof a.ownerDocument=="undefined"&&(a.ownerDocument=globalThis.document),typeof a.disableRange!="boolean"&&(a.disableRange=!1),typeof a.disableStream!="boolean"&&(a.disableStream=!1),typeof a.disableAutoFetch!="boolean"&&(a.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(a.verbosity),!p){const w={verbosity:a.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};p=w.port?_PDFWorker.fromPort(w):new _PDFWorker(w),e._worker=p}const R=e.docId;return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const w=_fetchDocument(p,a,g,R),_=new Promise(function(G){let j;g?j=new _transport_stream.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,contentDispositionFilename:a.contentDispositionFilename,disableRange:a.disableRange,disableStream:a.disableStream},g):a.data||(j=createPDFNetworkStream({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream})),G(j)});return Promise.all([w,_]).then(function([G,j]){if(e.destroyed)throw new Error("Loading aborted");const D=new _message_handler.MessageHandler(R,G,p.port),T=new WorkerTransport(D,e,j,a);e._transport=T,D.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(b,e,c,a){if(b.destroyed)throw new Error("Worker was destroyed");c&&(e.length=c.length,e.initialData=c.initialData,e.progressiveDone=c.progressiveDone,e.contentDispositionFilename=c.contentDispositionFilename);const g=await b.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.13.216",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(b.destroyed)throw new Error("Worker was destroyed");return g}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)==null?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,c,a=!1,g=null){this.length=e,this.initialData=c,this.progressiveDone=a,this.contentDispositionFilename=g,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,c){for(const a of this._rangeListeners)a(e,c)}onDataProgress(e,c){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(e,c)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,c){this._pdfInfo=e,this._transport=c,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,c,a,g,p=!1){this._pageIndex=e,this._pageInfo=c,this._ownerDocument=g,this._transport=a,this._stats=p?new _display_utils.StatTimer:null,this._pdfBug=p,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:c=this.rotate,offsetX:a=0,offsetY:g=0,dontFlip:p=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:c,offsetX:a,offsetY:g,dontFlip:p})}getAnnotations({intent:e="display"}={}){const c=this._transport.getRenderingIntent(e);let a=this._annotationPromises.get(c.cacheKey);return a||(a=this._transport.getAnnotations(this._pageIndex,c.renderingIntent),this._annotationPromises.set(c.cacheKey,a),a=a.then(g=>{for(const p of g)p.titleObj!==void 0&&Object.defineProperty(p,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),p.titleObj.str}}),p.contentsObj!==void 0&&Object.defineProperty(p,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),p.contentsObj.str}});return g})),a}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:c,intent:a="display",annotationMode:g=_util.AnnotationMode.ENABLE,transform:p=null,imageLayer:R=null,canvasFactory:w=null,background:_=null,optionalContentConfigPromise:G=null,annotationCanvasMap:j=null}){var L,E;((L=arguments[0])==null?void 0:L.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&g===_util.AnnotationMode.ENABLE&&(g=_util.AnnotationMode.ENABLE_FORMS)),((E=arguments[0])==null?void 0:E.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&g===_util.AnnotationMode.ENABLE&&(g=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const D=this._transport.getRenderingIntent(a,g);this.pendingCleanup=!1,G||(G=this._transport.getOptionalContentConfig());let T=this._intentStates.get(D.cacheKey);T||(T=Object.create(null),this._intentStates.set(D.cacheKey,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const r=w||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),l=!!(D.renderingIntent&_util.RenderingIntentFlag.PRINT);T.displayReadyCapability||(T.displayReadyCapability=(0,_util.createPromiseCapability)(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(D));const x=N=>{T.renderTasks.delete(F),(this.cleanupAfterRender||l)&&(this.pendingCleanup=!0),this._tryCleanup(),N?(F.capability.reject(N),this._abortOperatorList({intentState:T,reason:N instanceof Error?N:new Error(N)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},F=new InternalRenderTask({callback:x,params:{canvasContext:e,viewport:c,transform:p,imageLayer:R,background:_},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:j,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:r,useRequestAnimationFrame:!l,pdfBug:this._pdfBug});(T.renderTasks||(T.renderTasks=new Set)).add(F);const C=F.task;return Promise.all([T.displayReadyCapability.promise,G]).then(([N,X])=>{if(this.pendingCleanup){x();return}this._stats&&this._stats.time("Rendering"),F.initializeGraphics({transparency:N,optionalContentConfig:X}),F.operatorListChanged()}).catch(x),C}getOperatorList({intent:e="display",annotationMode:c=_util.AnnotationMode.ENABLE}={}){function a(){p.operatorList.lastChunk&&(p.opListReadCapability.resolve(p.operatorList),p.renderTasks.delete(R))}const g=this._transport.getRenderingIntent(e,c,!0);let p=this._intentStates.get(g.cacheKey);p||(p=Object.create(null),this._intentStates.set(g.cacheKey,p));let R;return p.opListReadCapability||(R=Object.create(null),R.operatorListChanged=a,p.opListReadCapability=(0,_util.createPromiseCapability)(),(p.renderTasks||(p.renderTasks=new Set)).add(R),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(g)),p.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:c===!0},{highWaterMark:100,size(g){return g.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>_xfa_text.XfaText.textContent(a));const c=this.streamTextContent(e);return new Promise(function(a,g){function p(){R.read().then(function({value:_,done:G}){if(G){a(w);return}Object.assign(w.styles,_.styles),w.items.push(..._.items),p()},g)}const R=c.getReader(),w={items:[],styles:Object.create(null)};p()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const a of c.renderTasks)e.push(a.completed),a.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:c,operatorList:a}of this._intentStates.values())if(c.size>0||!a.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(e,c){const a=this._intentStates.get(c);!a||(this._stats&&this._stats.timeEnd("Page Request"),a.displayReadyCapability&&a.displayReadyCapability.resolve(e))}_renderPageChunk(e,c){for(let a=0,g=e.length;a<g;a++)c.operatorList.fnArray.push(e.fnArray[a]),c.operatorList.argsArray.push(e.argsArray[a]);c.operatorList.lastChunk=e.lastChunk;for(const a of c.renderTasks)a.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:c}){const g=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:c,annotationStorage:e&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),p=this._intentStates.get(c);p.streamReader=g;const R=()=>{g.read().then(({value:w,done:_})=>{if(_){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(w,p),R())},w=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const _ of p.renderTasks)_.operatorListChanged();this._tryCleanup()}if(p.displayReadyCapability)p.displayReadyCapability.reject(w);else if(p.opListReadCapability)p.opListReadCapability.reject(w);else throw w}})};R()}_abortOperatorList({intentState:e,reason:c,force:a=!1}){if(!!e.streamReader){if(!a){if(e.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:c,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[g,p]of this._intentStates)if(p===e){this._intentStates.delete(g);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,c){const a={data:structuredClone(e,c)};this._deferred.then(()=>{for(const g of this._listeners)g.call(this,a)})}addEventListener(e,c){this._listeners.push(c)}removeEventListener(e,c){const a=this._listeners.indexOf(c);this._listeners.splice(a,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(d=document==null?void 0:document.currentScript)==null?void 0:d.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(b){const e=`importScripts("${b}");`;return URL.createObjectURL(new Blob([e]))}}class _PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:b=null,port:e=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){if(e&&_PDFWorker._workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=b,this.destroyed=!1,this.verbosity=c,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){_PDFWorker._workerPorts.set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let b=_PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const e=new Worker(b),c=new _message_handler.MessageHandler("main","worker",e),a=()=>{e.removeEventListener("error",g),c.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},g=()=>{this._webWorker||a()};e.addEventListener("error",g),c.on("test",R=>{if(e.removeEventListener("error",g),this.destroyed){a();return}R?(this._messageHandler=c,this._port=e,this._webWorker=e,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),e.terminate())}),c.on("ready",R=>{if(e.removeEventListener("error",g),this.destroyed){a();return}try{p()}catch{this._setupFakeWorker()}});const p=()=>{const R=new Uint8Array([255]);try{c.send("test",R,[R.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),R[0]=0,c.send("test",R)}};p();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const c=`fake${PDFWorkerUtil.fakeWorkerId++}`,a=new _message_handler.MessageHandler(c+"_worker",c,e);b.setup(a,e);const g=new _message_handler.MessageHandler(c,c+"_worker",e);this._messageHandler=g,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(b.port)?this._workerPorts.get(b.port):new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(e,c,a,g){Pt(this,n,null);Pt(this,k,new Map);Pt(this,s,new Map);Pt(this,B,null);this.messageHandler=e,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:c.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:g.ownerDocument,styleElement:g.styleElement}),this._params=g,g.useWorkerFetch||(this.CMapReaderFactory=new g.CMapReaderFactory({baseUrl:g.cMapUrl,isCompressed:g.cMapPacked}),this.StandardFontDataFactory=new g.StandardFontDataFactory({baseUrl:g.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return pt(this,n)}getRenderingIntent(e,c=_util.AnnotationMode.ENABLE,a=!1){let g=_util.RenderingIntentFlag.DISPLAY,p="";switch(e){case"any":g=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":g=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(c){case _util.AnnotationMode.DISABLE:g+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:g+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:g+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,p=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${c}`)}return a&&(g+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:g,cacheKey:`${g}_${p}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const a of pt(this,k).values())e.push(a._destroy());pt(this,k).clear(),pt(this,s).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return e.push(c),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Et(this,B,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:c}=this;e.on("GetReader",(a,g)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=p=>{this._lastProgress={loaded:p.loaded,total:p.total}},g.onPull=()=>{this._fullReader.read().then(function({value:p,done:R}){if(R){g.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(p),"GetReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(p),1,[p])}).catch(p=>{g.error(p)})},g.onCancel=p=>{this._fullReader.cancel(p),g.ready.catch(R=>{if(!this.destroyed)throw R})}}),e.on("ReaderHeadersReady",a=>{const g=(0,_util.createPromiseCapability)(),p=this._fullReader;return p.headersReady.then(()=>{var R;(!p.isStreamingSupported||!p.isRangeSupported)&&(this._lastProgress&&((R=c.onProgress)==null||R.call(c,this._lastProgress)),p.onProgress=w=>{var _;(_=c.onProgress)==null||_.call(c,{loaded:w.loaded,total:w.total})}),g.resolve({isStreamingSupported:p.isStreamingSupported,isRangeSupported:p.isRangeSupported,contentLength:p.contentLength})},g.reject),g.promise}),e.on("GetRangeReader",(a,g)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const p=this._networkStream.getRangeReader(a.begin,a.end);if(!p){g.close();return}g.onPull=()=>{p.read().then(function({value:R,done:w}){if(w){g.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(R),"GetRangeReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{g.error(R)})},g.onCancel=R=>{p.cancel(R),g.ready.catch(w=>{if(!this.destroyed)throw w})}}),e.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(a,this))}),e.on("DocException",function(a){let g;switch(a.name){case"PasswordException":g=new _util.PasswordException(a.message,a.code);break;case"InvalidPDFException":g=new _util.InvalidPDFException(a.message);break;case"MissingPDFException":g=new _util.MissingPDFException(a.message);break;case"UnexpectedResponseException":g=new _util.UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":g=new _util.UnknownErrorException(a.message,a.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(g)}),e.on("PasswordRequest",a=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),c.onPassword){const g=p=>{p instanceof Error?this._passwordCapability.reject(p):this._passwordCapability.resolve({password:p})};try{c.onPassword(g,a.code)}catch(p){this._passwordCapability.reject(p)}}else this._passwordCapability.reject(new _util.PasswordException(a.message,a.code));return this._passwordCapability.promise}),e.on("DataLoaded",a=>{var g;(g=c.onProgress)==null||g.call(c,{loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),e.on("StartRenderPage",a=>{if(this.destroyed)return;pt(this,k).get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),e.on("commonobj",([a,g,p])=>{var R;if(!this.destroyed&&!this.commonObjs.has(a))switch(g){case"Font":const w=this._params;if("error"in p){const j=p.error;(0,_util.warn)(`Error during font loading: ${j}`),this.commonObjs.resolve(a,j);break}let _=null;w.pdfBug&&((R=globalThis.FontInspector)==null?void 0:R.enabled)&&(_={registerFont(j,D){globalThis.FontInspector.fontAdded(j,D)}});const G=new _font_loader.FontFaceObject(p,{isEvalSupported:w.isEvalSupported,disableFontFace:w.disableFontFace,ignoreErrors:w.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:_});this.fontLoader.bind(G).catch(j=>e.sendWithPromise("FontFallback",{id:a})).finally(()=>{!w.fontExtraProperties&&G.data&&(G.data=null),this.commonObjs.resolve(a,G)});break;case"FontPath":case"Image":this.commonObjs.resolve(a,p);break;default:throw new Error(`Got unknown common object type ${g}`)}}),e.on("obj",([a,g,p,R])=>{var _;if(this.destroyed)return;const w=pt(this,k).get(g);if(!w.objs.has(a))switch(p){case"Image":w.objs.resolve(a,R);const G=8e6;((_=R==null?void 0:R.data)==null?void 0:_.length)>G&&(w.cleanupAfterRender=!0);break;case"Pattern":w.objs.resolve(a,R);break;default:throw new Error(`Got unknown object type ${p}`)}}),e.on("DocProgress",a=>{var g;this.destroyed||(g=c.onProgress)==null||g.call(c,{loaded:a.loaded,total:a.total})}),e.on("DocStats",a=>{this.destroyed||Et(this,n,Object.freeze({streamTypes:Object.freeze(a.streamTypes),fontTypes:Object.freeze(a.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(a):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(a):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var c,a;this.destroyed||(a=(c=this.loadingTask).onUnsupportedFeature)==null||a.call(c,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=e-1,a=pt(this,s).get(c);if(a)return a;const g=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(p=>{if(this.destroyed)throw new Error("Transport destroyed");const R=new PDFPageProxy(c,p,this,this._params.ownerDocument,this._params.pdfBug);return pt(this,k).set(c,R),R});return pt(this,s).set(c,g),g}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:c})}saveDocument(){var e,c;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(c=(e=this._fullReader)==null?void 0:e.filename)!=null?c:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return pt(this,B)||Et(this,B,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var c,a,g,p;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:(a=(c=this._fullReader)==null?void 0:c.filename)!=null?a:null,contentLength:(p=(g=this._fullReader)==null?void 0:g.contentLength)!=null?p:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const c of pt(this,k).values())if(!c.cleanup())throw new Error(`startCleanup: Page ${c.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),Et(this,B,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}n=new WeakMap,k=new WeakMap,s=new WeakMap,B=new WeakMap;class PDFObjects{constructor(){Pt(this,H);Pt(this,U,Object.create(null))}get(e,c=null){if(c){const g=Dt(this,H,Ht).call(this,e);return g.capability.promise.then(()=>c(g.data)),null}const a=pt(this,U)[e];if(!(a!=null&&a.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return a.data}has(e){const c=pt(this,U)[e];return(c==null?void 0:c.capability.settled)||!1}resolve(e,c=null){const a=Dt(this,H,Ht).call(this,e);a.data=c,a.capability.resolve()}clear(){Et(this,U,Object.create(null))}}U=new WeakMap,H=new WeakSet,Ht=function(e){const c=pt(this,U)[e];return c||(pt(this,U)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:e,params:c,objs:a,commonObjs:g,annotationCanvasMap:p,operatorList:R,pageIndex:w,canvasFactory:_,useRequestAnimationFrame:G=!1,pdfBug:j=!1}){this.callback=e,this.params=c,this.objs=a,this.commonObjs=g,this.annotationCanvasMap=p,this.operatorListIdx=null,this.operatorList=R,this._pageIndex=w,this.canvasFactory=_,this._pdfBug=j,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=G===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:c}){var _;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&((_=globalThis.StepperManager)==null?void 0:_.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:g,transform:p,imageLayer:R,background:w}=this.params;this.gfx=new _canvas.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,R,c,this.annotationCanvasMap),this.gfx.beginDrawing({transform:p,viewport:g,transparency:e,background:w}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}const version="2.13.216";exports.version=version;const build="399a0ec60";exports.build=build},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=void 0,n.deprecated=r,n.getFilenameFromUrl=_,n.getPdfFilenameFromUrl=G,n.getXfaPageViewport=F,n.isDataScheme=R,n.isPdfFile=w,n.isValidFetchUrl=D,n.loadScript=T;var s=k(6),B=k(1);const U="http://www.w3.org/2000/svg",C=class{};let H=C;jt(H,"CSS",96),jt(H,"PDF",72),jt(H,"PDF_TO_CSS_UNITS",C.CSS/C.PDF),n.PixelsPerInch=H;class O extends s.BaseCanvasFactory{constructor({ownerDocument:E=globalThis.document}={}){super();this._document=E}_createCanvas(E,N){const X=this._document.createElement("canvas");return X.width=E,X.height=N,X}}n.DOMCanvasFactory=O;async function b(L,E=!1){if(D(L,document.baseURI)){const N=await fetch(L);if(!N.ok)throw new Error(N.statusText);return E?new Uint8Array(await N.arrayBuffer()):(0,B.stringToBytes)(await N.text())}return new Promise((N,X)=>{const V=new XMLHttpRequest;V.open("GET",L,!0),E&&(V.responseType="arraybuffer"),V.onreadystatechange=()=>{if(V.readyState===XMLHttpRequest.DONE){if(V.status===200||V.status===0){let Y;if(E&&V.response?Y=new Uint8Array(V.response):!E&&V.responseText&&(Y=(0,B.stringToBytes)(V.responseText)),Y){N(Y);return}}X(new Error(V.statusText))}},V.send(null)})}class e extends s.BaseCMapReaderFactory{_fetchData(E,N){return b(E,this.isCompressed).then(X=>({cMapData:X,compressionType:N}))}}n.DOMCMapReaderFactory=e;class c extends s.BaseStandardFontDataFactory{_fetchData(E){return b(E,!0)}}n.DOMStandardFontDataFactory=c;class a extends s.BaseSVGFactory{_createSVG(E){return document.createElementNS(U,E)}}n.DOMSVGFactory=a;class g{constructor({viewBox:E,scale:N,rotation:X,offsetX:V=0,offsetY:Y=0,dontFlip:tt=!1}){this.viewBox=E,this.scale=N,this.rotation=X,this.offsetX=V,this.offsetY=Y;const Q=(E[2]+E[0])/2,A=(E[3]+E[1])/2;let o,i,u,S;switch(X%=360,X<0&&(X+=360),X){case 180:o=-1,i=0,u=0,S=1;break;case 90:o=0,i=1,u=1,S=0;break;case 270:o=0,i=-1,u=-1,S=0;break;case 0:o=1,i=0,u=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}tt&&(u=-u,S=-S);let v,P,t,f;o===0?(v=Math.abs(A-E[1])*N+V,P=Math.abs(Q-E[0])*N+Y,t=Math.abs(E[3]-E[1])*N,f=Math.abs(E[2]-E[0])*N):(v=Math.abs(Q-E[0])*N+V,P=Math.abs(A-E[1])*N+Y,t=Math.abs(E[2]-E[0])*N,f=Math.abs(E[3]-E[1])*N),this.transform=[o*N,i*N,u*N,S*N,v-o*N*Q-u*N*A,P-i*N*Q-S*N*A],this.width=t,this.height=f}clone({scale:E=this.scale,rotation:N=this.rotation,offsetX:X=this.offsetX,offsetY:V=this.offsetY,dontFlip:Y=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:E,rotation:N,offsetX:X,offsetY:V,dontFlip:Y})}convertToViewportPoint(E,N){return B.Util.applyTransform([E,N],this.transform)}convertToViewportRectangle(E){const N=B.Util.applyTransform([E[0],E[1]],this.transform),X=B.Util.applyTransform([E[2],E[3]],this.transform);return[N[0],N[1],X[0],X[1]]}convertToPdfPoint(E,N){return B.Util.applyInverseTransform([E,N],this.transform)}}n.PageViewport=g;class p extends B.BaseException{constructor(E,N){super(E,"RenderingCancelledException");this.type=N}}n.RenderingCancelledException=p;function R(L){const E=L.length;let N=0;for(;N<E&&L[N].trim()==="";)N++;return L.substring(N,N+5).toLowerCase()==="data:"}function w(L){return typeof L=="string"&&/\.pdf$/i.test(L)}function _(L){const E=L.indexOf("#"),N=L.indexOf("?"),X=Math.min(E>0?E:L.length,N>0?N:L.length);return L.substring(L.lastIndexOf("/",X)+1,X)}function G(L,E="document.pdf"){if(typeof L!="string")return E;if(R(L))return(0,B.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),E;const N=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,X=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,V=N.exec(L);let Y=X.exec(V[1])||X.exec(V[2])||X.exec(V[3]);if(Y&&(Y=Y[0],Y.includes("%")))try{Y=X.exec(decodeURIComponent(Y))[0]}catch{}return Y||E}class j{constructor(){this.started=Object.create(null),this.times=[]}time(E){E in this.started&&(0,B.warn)(`Timer is already running for ${E}`),this.started[E]=Date.now()}timeEnd(E){E in this.started||(0,B.warn)(`Timer has not been started for ${E}`),this.times.push({name:E,start:this.started[E],end:Date.now()}),delete this.started[E]}toString(){const E=[];let N=0;for(const X of this.times){const V=X.name;V.length>N&&(N=V.length)}for(const X of this.times){const V=X.end-X.start;E.push(`${X.name.padEnd(N)} ${V}ms
`)}return E.join("")}}n.StatTimer=j;function D(L,E){try{const{protocol:N}=E?new URL(L,E):new URL(L);return N==="http:"||N==="https:"}catch{return!1}}function T(L,E=!1){return new Promise((N,X)=>{const V=document.createElement("script");V.src=L,V.onload=function(Y){E&&V.remove(),N(Y)},V.onerror=function(){X(new Error(`Cannot load script at: ${V.src}`))},(document.head||document.documentElement).appendChild(V)})}function r(L){console.log("Deprecated API usage: "+L)}let l;class x{static toDateObject(E){if(!E||typeof E!="string")return null;l||(l=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const N=l.exec(E);if(!N)return null;const X=parseInt(N[1],10);let V=parseInt(N[2],10);V=V>=1&&V<=12?V-1:0;let Y=parseInt(N[3],10);Y=Y>=1&&Y<=31?Y:1;let tt=parseInt(N[4],10);tt=tt>=0&&tt<=23?tt:0;let Q=parseInt(N[5],10);Q=Q>=0&&Q<=59?Q:0;let A=parseInt(N[6],10);A=A>=0&&A<=59?A:0;const o=N[7]||"Z";let i=parseInt(N[8],10);i=i>=0&&i<=23?i:0;let u=parseInt(N[9],10)||0;return u=u>=0&&u<=59?u:0,o==="-"?(tt+=i,Q+=u):o==="+"&&(tt-=i,Q-=u),new Date(Date.UTC(X,V,Y,tt,Q,A))}}n.PDFDateString=x;function F(L,{scale:E=1,rotation:N=0}){const{width:X,height:V}=L.attributes.style,Y=[0,0,parseInt(X),parseInt(V)];return new g({viewBox:Y,scale:E,rotation:N})}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var s=k(1);class B{constructor(){this.constructor===B&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,c){if(e<=0||c<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(e,c);return{canvas:a,context:a.getContext("2d")}}reset(e,c,a){if(!e.canvas)throw new Error("Canvas is not specified");if(c<=0||a<=0)throw new Error("Invalid canvas size");e.canvas.width=c,e.canvas.height=a}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,c){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=B;class U{constructor({baseUrl:e=null,isCompressed:c=!1}){this.constructor===U&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=c}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const c=this.baseUrl+e+(this.isCompressed?".bcmap":""),a=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(c,a).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${c}`)})}_fetchData(e,c){(0,s.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=U;class H{constructor({baseUrl:e=null}){this.constructor===H&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const c=`${this.baseUrl}${e}`;return this._fetchData(c).catch(a=>{throw new Error(`Unable to load font data at: ${c}`)})}_fetchData(e){(0,s.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=H;class O{constructor(){this.constructor===O&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,c){if(e<=0||c<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),a.setAttribute("width",`${e}px`),a.setAttribute("height",`${c}px`),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${e} ${c}`),a}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,s.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=O},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var s=k(1);class B{constructor({docId:b,onUnsupportedFeature:e,ownerDocument:c=globalThis.document,styleElement:a=null}){this.constructor===B&&(0,s.unreachable)("Cannot initialize BaseFontLoader."),this.docId=b,this._onUnsupportedFeature=e,this._document=c,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(b){this.nativeFontFaces.push(b),this._document.fonts.add(b)}insertRule(b){let e=this.styleElement;e||(e=this.styleElement=this._document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(e));const c=e.sheet;c.insertRule(b,c.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(b){if(b.attached||b.missingFile)return;if(b.attached=!0,this.isFontLoadingAPISupported){const c=b.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(a){throw this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,s.warn)(`Failed to load font '${c.family}': '${a}'.`),b.disableFontFace=!0,a}}return}const e=b.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const a=this._queueLoadingCallback(c);this._prepareFontLoadEvent([e],[b],a)})}}_queueLoadingCallback(b){(0,s.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var e;const b=!!((e=this._document)!=null&&e.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){(0,s.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,s.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(b,e,c){(0,s.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let U;n.FontLoader=U,n.FontLoader=U=class extends B{constructor(b){super(b);this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let b=!1;if(typeof navigator=="undefined")b=!0;else{const e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(e==null?void 0:e[1])>=14&&(b=!0)}return(0,s.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function e(){for((0,s.assert)(!a.done,"completeRequest() cannot be called twice."),a.done=!0;c.requests.length>0&&c.requests[0].done;){const g=c.requests.shift();setTimeout(g.callback,0)}}const c=this.loadingContext,a={id:`pdfjs-font-loading-${c.nextRequestId++}`,done:!1,complete:e,callback:b};return c.requests.push(a),a}get _loadTestFont(){const b=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,s.shadow)(this,"_loadTestFont",b())}_prepareFontLoadEvent(b,e,c){function a(X,V){return X.charCodeAt(V)<<24|X.charCodeAt(V+1)<<16|X.charCodeAt(V+2)<<8|X.charCodeAt(V+3)&255}function g(X,V,Y,tt){const Q=X.substring(0,V),A=X.substring(V+Y);return Q+tt+A}let p,R;const w=this._document.createElement("canvas");w.width=1,w.height=1;const _=w.getContext("2d");let G=0;function j(X,V){if(G++,G>30){(0,s.warn)("Load test font never loaded."),V();return}if(_.font="30px "+X,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(j.bind(null,X,V))}const D=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=g(T,976,D.length,D);const l=16,x=1482184792;let F=a(T,l);for(p=0,R=D.length-3;p<R;p+=4)F=F-x+a(D,p)|0;p<D.length&&(F=F-x+a(D+"XXX",p)|0),T=g(T,l,4,(0,s.string32)(F));const C=`url(data:font/opentype;base64,${btoa(T)});`,L=`@font-face {font-family:"${D}";src:${C}}`;this.insertRule(L);const E=[];for(const X of e)E.push(X.loadedName);E.push(D);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const X of E){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=X,N.appendChild(V)}this._document.body.appendChild(N),j(D,()=>{N.remove(),c.complete()})}};class H{constructor(b,{isEvalSupported:e=!0,disableFontFace:c=!1,ignoreErrors:a=!1,onUnsupportedFeature:g,fontRegistry:p=null}){this.compiledGlyphs=Object.create(null);for(const R in b)this[R]=b[R];this.isEvalSupported=e!==!1,this.disableFontFace=c===!0,this.ignoreErrors=a===!0,this._onUnsupportedFeature=g,this.fontRegistry=p}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this.fontRegistry&&this.fontRegistry.registerFont(this),b}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const b=(0,s.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(b)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${e}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,e),c}getPathGenerator(b,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let c;try{c=b.get(this.loadedName+"_path_"+e)}catch(a){if(!this.ignoreErrors)throw a;return this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,s.warn)(`getPathGenerator - ignoring character: "${a}".`),this.compiledGlyphs[e]=function(g,p){}}if(this.isEvalSupported&&s.IsEvalSupportedCached.value){const a=[];for(const g of c){const p=g.args!==void 0?g.args.join(","):"";a.push("c.",g.cmd,"(",p,`);
`)}return this.compiledGlyphs[e]=new Function("c","size",a.join(""))}return this.compiledGlyphs[e]=function(a,g){for(const p of c)p.cmd==="scale"&&(p.args=[g,-g]),a[p.cmd].apply(a,p.args)}}}n.FontFaceObject=H},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var s=k(6),B=k(3),U=k(1);let H=class{constructor(){(0,U.unreachable)("Not implemented: NodeCanvasFactory")}};n.NodeCanvasFactory=H;let O=class{constructor(){(0,U.unreachable)("Not implemented: NodeCMapReaderFactory")}};n.NodeCMapReaderFactory=O;let b=class{constructor(){(0,U.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(n.NodeStandardFontDataFactory=b,B.isNodeJS){const e=function(c){return new Promise((a,g)=>{require$$4.readFile(c,(R,w)=>{if(R||!w){g(new Error(R));return}a(new Uint8Array(w))})})};n.NodeCanvasFactory=H=class extends s.BaseCanvasFactory{_createCanvas(c,a){return require$$4.createCanvas(c,a)}},n.NodeCMapReaderFactory=O=class extends s.BaseCMapReaderFactory{_fetchData(c,a){return e(c).then(g=>({cMapData:g,compressionType:a}))}},n.NodeStandardFontDataFactory=b=class extends s.BaseStandardFontDataFactory{_fetchData(c){return e(c)}}}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationStorage=void 0;var s=k(1);class B{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(H,O){const b=this._storage.get(H);return b===void 0?O:Object.assign(O,b)}setValue(H,O){const b=this._storage.get(H);let e=!1;if(b!==void 0)for(const[c,a]of Object.entries(O))b[c]!==a&&(e=!0,b[c]=a);else e=!0,this._storage.set(H,O);e&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,s.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}n.AnnotationStorage=B},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var s=k(1),B=k(11),U=k(5);const H=16,O=100,b=4096,e=15,c=10,a=1e3,g=16,p=1.000001;function R(A,o){if(A._removeMirroring)throw new Error("Context is already forwarding operations.");A.__originalSave=A.save,A.__originalRestore=A.restore,A.__originalRotate=A.rotate,A.__originalScale=A.scale,A.__originalTranslate=A.translate,A.__originalTransform=A.transform,A.__originalSetTransform=A.setTransform,A.__originalResetTransform=A.resetTransform,A.__originalClip=A.clip,A.__originalMoveTo=A.moveTo,A.__originalLineTo=A.lineTo,A.__originalBezierCurveTo=A.bezierCurveTo,A.__originalRect=A.rect,A.__originalClosePath=A.closePath,A.__originalBeginPath=A.beginPath,A._removeMirroring=()=>{A.save=A.__originalSave,A.restore=A.__originalRestore,A.rotate=A.__originalRotate,A.scale=A.__originalScale,A.translate=A.__originalTranslate,A.transform=A.__originalTransform,A.setTransform=A.__originalSetTransform,A.resetTransform=A.__originalResetTransform,A.clip=A.__originalClip,A.moveTo=A.__originalMoveTo,A.lineTo=A.__originalLineTo,A.bezierCurveTo=A.__originalBezierCurveTo,A.rect=A.__originalRect,A.closePath=A.__originalClosePath,A.beginPath=A.__originalBeginPath,delete A._removeMirroring},A.save=function(){o.save(),this.__originalSave()},A.restore=function(){o.restore(),this.__originalRestore()},A.translate=function(u,S){o.translate(u,S),this.__originalTranslate(u,S)},A.scale=function(u,S){o.scale(u,S),this.__originalScale(u,S)},A.transform=function(u,S,v,P,t,f){o.transform(u,S,v,P,t,f),this.__originalTransform(u,S,v,P,t,f)},A.setTransform=function(u,S,v,P,t,f){o.setTransform(u,S,v,P,t,f),this.__originalSetTransform(u,S,v,P,t,f)},A.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},A.rotate=function(u){o.rotate(u),this.__originalRotate(u)},A.clip=function(u){o.clip(u),this.__originalClip(u)},A.moveTo=function(i,u){o.moveTo(i,u),this.__originalMoveTo(i,u)},A.lineTo=function(i,u){o.lineTo(i,u),this.__originalLineTo(i,u)},A.bezierCurveTo=function(i,u,S,v,P,t){o.bezierCurveTo(i,u,S,v,P,t),this.__originalBezierCurveTo(i,u,S,v,P,t)},A.rect=function(i,u,S,v){o.rect(i,u,S,v),this.__originalRect(i,u,S,v)},A.closePath=function(){o.closePath(),this.__originalClosePath()},A.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}function w(A){if(A._transformStack&&(A._transformStack=[]),!A.mozCurrentTransform){A._originalSave=A.save,A._originalRestore=A.restore,A._originalRotate=A.rotate,A._originalScale=A.scale,A._originalTranslate=A.translate,A._originalTransform=A.transform,A._originalSetTransform=A.setTransform,A._originalResetTransform=A.resetTransform,A._transformMatrix=A._transformMatrix||[1,0,0,1,0,0],A._transformStack=[];try{const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(A),"lineWidth");A._setLineWidth=o.set,A._getLineWidth=o.get,Object.defineProperty(A,"lineWidth",{set:function(u){this._setLineWidth(u*p)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(A,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(A,"mozCurrentTransformInverse",{get:function(){const[i,u,S,v,P,t]=this._transformMatrix,f=i*v-u*S,m=u*S-i*v;return[v/f,u/m,S/m,i/f,(v*P-S*t)/m,(u*P-i*t)/f]}}),A.save=function(){const i=this._transformMatrix;this._transformStack.push(i),this._transformMatrix=i.slice(0,6),this._originalSave()},A.restore=function(){this._transformStack.length===0&&(0,s.warn)("Tried to restore a ctx when the stack was already empty.");const i=this._transformStack.pop();i&&(this._transformMatrix=i,this._originalRestore())},A.translate=function(i,u){const S=this._transformMatrix;S[4]=S[0]*i+S[2]*u+S[4],S[5]=S[1]*i+S[3]*u+S[5],this._originalTranslate(i,u)},A.scale=function(i,u){const S=this._transformMatrix;S[0]*=i,S[1]*=i,S[2]*=u,S[3]*=u,this._originalScale(i,u)},A.transform=function(i,u,S,v,P,t){const f=this._transformMatrix;this._transformMatrix=[f[0]*i+f[2]*u,f[1]*i+f[3]*u,f[0]*S+f[2]*v,f[1]*S+f[3]*v,f[0]*P+f[2]*t+f[4],f[1]*P+f[3]*t+f[5]],A._originalTransform(i,u,S,v,P,t)},A.setTransform=function(i,u,S,v,P,t){this._transformMatrix=[i,u,S,v,P,t],A._originalSetTransform(i,u,S,v,P,t)},A.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],A._originalResetTransform()},A.rotate=function(i){const u=Math.cos(i),S=Math.sin(i),v=this._transformMatrix;this._transformMatrix=[v[0]*u+v[2]*S,v[1]*u+v[3]*S,v[0]*-S+v[2]*u,v[1]*-S+v[3]*u,v[4],v[5]],this._originalRotate(i)}}}class _{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,i,u,S){let v;return this.cache[o]!==void 0?(v=this.cache[o],this.canvasFactory.reset(v,i,u),v.context.setTransform(1,0,0,1,0,0)):(v=this.canvasFactory.create(i,u),this.cache[o]=v),S&&w(v.context),v}clear(){for(const o in this.cache){const i=this.cache[o];this.canvasFactory.destroy(i),delete this.cache[o]}}}function G(A){const i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=A.width,S=A.height,v=u+1;let P,t,f,m;const y=new Uint8Array(v*(S+1)),h=u+7&-8,M=A.data,I=new Uint8Array(h*S);let W=0;for(P=0,t=M.length;P<t;P++){const et=M[P];let st=128;for(;st>0;)I[W++]=et&st?0:255,st>>=1}let z=0;for(W=0,I[W]!==0&&(y[0]=1,++z),f=1;f<u;f++)I[W]!==I[W+1]&&(y[f]=I[W]?2:1,++z),W++;for(I[W]!==0&&(y[f]=2,++z),P=1;P<S;P++){W=P*h,m=P*v,I[W-h]!==I[W]&&(y[m]=I[W]?1:8,++z);let et=(I[W]?4:0)+(I[W-h]?8:0);for(f=1;f<u;f++)et=(et>>2)+(I[W+1]?4:0)+(I[W-h+1]?8:0),i[et]&&(y[m+f]=i[et],++z),W++;if(I[W-h]!==I[W]&&(y[m+f]=I[W]?2:4,++z),z>1e3)return null}for(W=h*(S-1),m=P*v,I[W]!==0&&(y[m]=8,++z),f=1;f<u;f++)I[W]!==I[W+1]&&(y[m+f]=I[W]?4:8,++z),W++;if(I[W]!==0&&(y[m+f]=4,++z),z>1e3)return null;const K=new Int32Array([0,v,-1,0,-v,0,0,0,1]),Z=[];for(P=0;z&&P<=S;P++){let et=P*v;const st=et+u;for(;et<st&&!y[et];)et++;if(et===st)continue;const lt=[et%v,P],it=et;let ot=y[et];do{const ct=K[ot];do et+=ct;while(!y[et]);const dt=y[et];dt!==5&&dt!==10?(ot=dt,y[et]=0):(ot=dt&51*ot>>4,y[et]&=ot>>2|ot<<2),lt.push(et%v,et/v|0),y[et]||--z}while(it!==et);Z.push(lt),--P}return function(et){et.save(),et.scale(1/u,-1/S),et.translate(0,-S),et.beginPath();for(let st=0,lt=Z.length;st<lt;st++){const it=Z[st];et.moveTo(it[0],it[1]);for(let ot=2,ct=it.length;ot<ct;ot+=2)et.lineTo(it[ot],it[ot+1])}et.fill(),et.beginPath(),et.restore()}}class j{constructor(o,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,o,i])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,i){this.x=o,this.y=i}updatePathMinMax(o,i,u){[i,u]=s.Util.applyTransform([i,u],o),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,u)}updateCurvePathMinMax(o,i,u,S,v,P,t,f,m){const y=s.Util.bezierBoundingBox(i,u,S,v,P,t,f,m);this.updatePathMinMax(o,y[0],y[1]),this.updatePathMinMax(o,y[2],y[3])}getPathBoundingBox(o=B.PathType.FILL,i=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(o===B.PathType.STROKE){i||(0,s.unreachable)("Stroke bounding box must include transform.");const S=s.Util.singularValueDecompose2dScale(i),v=S[0]*this.lineWidth/2,P=S[1]*this.lineWidth/2;u[0]-=v,u[1]-=P,u[2]+=v,u[3]+=P}return u}updateClipFromPath(){const o=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=B.PathType.FILL,i=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(o,i))}}function D(A,o,i=null){if(typeof ImageData!="undefined"&&o instanceof ImageData){A.putImageData(o,0,0);return}const u=o.height,S=o.width,v=u%g,P=(u-v)/g,t=v===0?P:P+1,f=A.createImageData(S,g);let m=0,y;const h=o.data,M=f.data;let I,W,z,K,Z,nt,et,st;if(i)switch(i.length){case 1:Z=i[0],nt=i[0],et=i[0],st=i[0];break;case 4:Z=i[0],nt=i[1],et=i[2],st=i[3];break}if(o.kind===s.ImageKind.GRAYSCALE_1BPP){const lt=h.byteLength,it=new Uint32Array(M.buffer,0,M.byteLength>>2),ot=it.length,ct=S+7>>3;let dt=4294967295,_t=s.IsLittleEndianCached.value?4278190080:255;for(st&&st[0]===255&&st[255]===0&&([dt,_t]=[_t,dt]),I=0;I<t;I++){for(z=I<P?g:v,y=0,W=0;W<z;W++){const Ct=lt-m;let mt=0;const vt=Ct>ct?S:Ct*8-7,bt=vt&-8;let St=0,ft=0;for(;mt<bt;mt+=8)ft=h[m++],it[y++]=ft&128?dt:_t,it[y++]=ft&64?dt:_t,it[y++]=ft&32?dt:_t,it[y++]=ft&16?dt:_t,it[y++]=ft&8?dt:_t,it[y++]=ft&4?dt:_t,it[y++]=ft&2?dt:_t,it[y++]=ft&1?dt:_t;for(;mt<vt;mt++)St===0&&(ft=h[m++],St=128),it[y++]=ft&St?dt:_t,St>>=1}for(;y<ot;)it[y++]=0;A.putImageData(f,0,I*g)}}else if(o.kind===s.ImageKind.RGBA_32BPP){const lt=!!(Z||nt||et);for(W=0,K=S*g*4,I=0;I<P;I++){if(M.set(h.subarray(m,m+K)),m+=K,lt)for(let it=0;it<K;it+=4)Z&&(M[it+0]=Z[M[it+0]]),nt&&(M[it+1]=nt[M[it+1]]),et&&(M[it+2]=et[M[it+2]]);A.putImageData(f,0,W),W+=g}if(I<t){if(K=S*v*4,M.set(h.subarray(m,m+K)),lt)for(let it=0;it<K;it+=4)Z&&(M[it+0]=Z[M[it+0]]),nt&&(M[it+1]=nt[M[it+1]]),et&&(M[it+2]=et[M[it+2]]);A.putImageData(f,0,W)}}else if(o.kind===s.ImageKind.RGB_24BPP){const lt=!!(Z||nt||et);for(z=g,K=S*z,I=0;I<t;I++){for(I>=P&&(z=v,K=S*z),y=0,W=K;W--;)M[y++]=h[m++],M[y++]=h[m++],M[y++]=h[m++],M[y++]=255;if(lt)for(let it=0;it<y;it+=4)Z&&(M[it+0]=Z[M[it+0]]),nt&&(M[it+1]=nt[M[it+1]]),et&&(M[it+2]=et[M[it+2]]);A.putImageData(f,0,I*g)}}else throw new Error(`bad image kind: ${o.kind}`)}function T(A,o){const i=o.height,u=o.width,S=i%g,v=(i-S)/g,P=S===0?v:v+1,t=A.createImageData(u,g);let f=0;const m=o.data,y=t.data;for(let h=0;h<P;h++){const M=h<v?g:S;let I=3;for(let W=0;W<M;W++){let z,K=0;for(let Z=0;Z<u;Z++)K||(z=m[f++],K=128),y[I]=z&K?0:255,I+=4,K>>=1}A.putImageData(t,0,h*g)}}function r(A,o){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let u=0,S=i.length;u<S;u++){const v=i[u];A[v]!==void 0&&(o[v]=A[v])}A.setLineDash!==void 0&&(o.setLineDash(A.getLineDash()),o.lineDashOffset=A.lineDashOffset)}function l(A){A.strokeStyle="#000000",A.fillStyle="#000000",A.fillRule="nonzero",A.globalAlpha=1,A.lineWidth=1,A.lineCap="butt",A.lineJoin="miter",A.miterLimit=10,A.globalCompositeOperation="source-over",A.font="10px sans-serif",A.setLineDash!==void 0&&(A.setLineDash([]),A.lineDashOffset=0)}function x(A,o,i,u){const S=A.length;for(let v=3;v<S;v+=4){const P=A[v];if(P===0)A[v-3]=o,A[v-2]=i,A[v-1]=u;else if(P<255){const t=255-P;A[v-3]=A[v-3]*P+o*t>>8,A[v-2]=A[v-2]*P+i*t>>8,A[v-1]=A[v-1]*P+u*t>>8}}}function F(A,o,i){const u=A.length,S=1/255;for(let v=3;v<u;v+=4){const P=i?i[A[v]]:A[v];o[v]=o[v]*P*S|0}}function C(A,o,i){const u=A.length;for(let S=3;S<u;S+=4){const v=A[S-3]*77+A[S-2]*152+A[S-1]*28;o[S]=i?o[S]*i[v>>8]>>8:o[S]*v>>16}}function L(A,o,i,u,S,v,P,t,f,m,y){const h=!!v,M=h?v[0]:0,I=h?v[1]:0,W=h?v[2]:0;let z;S==="Luminosity"?z=C:z=F;const Z=Math.min(u,Math.ceil(1048576/i));for(let nt=0;nt<u;nt+=Z){const et=Math.min(Z,u-nt),st=A.getImageData(t-m,nt+(f-y),i,et),lt=o.getImageData(t,nt+f,i,et);h&&x(st.data,M,I,W),z(st.data,lt.data,P),o.putImageData(lt,t,nt+f)}}function E(A,o,i,u){const S=u[0],v=u[1],P=u[2]-S,t=u[3]-v;P===0||t===0||(L(o.context,i,P,t,o.subtype,o.backdrop,o.transferMap,S,v,o.offsetX,o.offsetY),A.save(),A.globalAlpha=1,A.globalCompositeOperation="source-over",A.setTransform(1,0,0,1,0,0),A.drawImage(i.canvas,0,0),A.restore())}function N(A,o){const i=s.Util.singularValueDecompose2dScale(A);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*U.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:i[0]<=u||i[1]<=u}const X=["butt","round","square"],V=["miter","round","bevel"],Y={},tt={};class Q{constructor(o,i,u,S,v,P,t){this.ctx=o,this.current=new j(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=u,this.canvasFactory=S,this.imageLayer=v,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=P,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=t,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,o&&w(o),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:o,viewport:i,transparency:u=!1,background:S=null}){const v=this.ctx.canvas.width,P=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=S||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,v,P),this.ctx.restore(),u){const t=this.cachedCanvases.getCanvas("transparent",v,P,!0);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),l(this.ctx),o&&(this.ctx.transform.apply(this.ctx,o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform.apply(this.ctx,i.transform),this.viewportScale=i.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(o,i,u,S){const v=o.argsArray,P=o.fnArray;let t=i||0;const f=v.length;if(f===t)return t;const m=f-t>c&&typeof u=="function",y=m?Date.now()+e:0;let h=0;const M=this.commonObjs,I=this.objs;let W;for(;;){if(S!==void 0&&t===S.nextBreakPoint)return S.breakIt(t,u),t;if(W=P[t],W!==s.OPS.dependency)this[W].apply(this,v[t]);else for(const z of v[t]){const K=z.startsWith("g_")?M:I;if(!K.has(z))return K.get(z,u),t}if(t++,t===f)return t;if(m&&++h>c){if(Date.now()>y)return u(),t;h=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,i){const u=o.width,S=o.height;let v=Math.max(Math.hypot(i[0],i[1]),1),P=Math.max(Math.hypot(i[2],i[3]),1),t=u,f=S,m="prescale1",y,h;for(;v>2&&t>1||P>2&&f>1;){let M=t,I=f;v>2&&t>1&&(M=Math.ceil(t/2),v/=t/M),P>2&&f>1&&(I=Math.ceil(f/2),P/=f/I),y=this.cachedCanvases.getCanvas(m,M,I),h=y.context,h.clearRect(0,0,M,I),h.drawImage(o,0,0,t,f,0,0,M,I),o=y.canvas,t=M,f=I,m=m==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:t,paintHeight:f}}_createMaskCanvas(o){const i=this.ctx,u=o.width,S=o.height,v=this.current.fillColor,P=this.current.patternFill,t=this.cachedCanvases.getCanvas("maskCanvas",u,S),f=t.context;T(f,o);const m=i.mozCurrentTransform;let y=s.Util.transform(m,[1/u,0,0,-1/S,0,0]);y=s.Util.transform(y,[1,0,0,1,0,-S]);const h=s.Util.applyTransform([0,0],y),M=s.Util.applyTransform([u,S],y),I=s.Util.normalizeRect([h[0],h[1],M[0],M[1]]),W=Math.ceil(I[2]-I[0]),z=Math.ceil(I[3]-I[1]),K=this.cachedCanvases.getCanvas("fillCanvas",W,z,!0),Z=K.context,nt=Math.min(h[0],M[0]),et=Math.min(h[1],M[1]);Z.translate(-nt,-et),Z.transform.apply(Z,y);const st=this._scaleImage(t.canvas,Z.mozCurrentTransformInverse);Z.imageSmoothingEnabled=N(Z.mozCurrentTransform,o.interpolate),Z.drawImage(st.img,0,0,st.img.width,st.img.height,0,0,u,S),Z.globalCompositeOperation="source-in";const lt=s.Util.transform(Z.mozCurrentTransformInverse,[1,0,0,1,-nt,-et]);return Z.fillStyle=P?v.getPattern(i,this,lt,B.PathType.FILL):v,Z.fillRect(0,0,u,S),{canvas:K.canvas,offsetX:Math.round(nt),offsetY:Math.round(et)}}setLineWidth(o){this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=X[o]}setLineJoin(o){this.ctx.lineJoin=V[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,i){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(o),u.lineDashOffset=i)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let i=0,u=o.length;i<u;i++){const S=o[i],v=S[0],P=S[1];switch(v){case"LW":this.setLineWidth(P);break;case"LC":this.setLineCap(P);break;case"LJ":this.setLineJoin(P);break;case"ML":this.setMiterLimit(P);break;case"D":this.setDash(P[0],P[1]);break;case"RI":this.setRenderingIntent(P);break;case"FL":this.setFlatness(P);break;case"Font":this.setFont(P[0],P[1]);break;case"CA":this.current.strokeAlpha=S[1];break;case"ca":this.current.fillAlpha=S[1],this.ctx.globalAlpha=S[1];break;case"BM":this.ctx.globalCompositeOperation=P;break;case"SMask":this.current.activeSMask=P?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=P}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.ctx.canvas.width,i=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,S=this.cachedCanvases.getCanvas(u,o,i,!0);this.suspendedCtx=this.ctx,this.ctx=S.context;const v=this.ctx;v.setTransform.apply(v,this.suspendedCtx.mozCurrentTransform),r(this.suspendedCtx,v),R(v,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),r(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,u=this.suspendedCtx;E(u,i,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(r(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),r(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}transform(o,i,u,S,v,P){this.ctx.transform(o,i,u,S,v,P),this._cachedGetSinglePixelWidth=null}constructPath(o,i){const u=this.ctx,S=this.current;let v=S.x,P=S.y,t,f;for(let m=0,y=0,h=o.length;m<h;m++)switch(o[m]|0){case s.OPS.rectangle:v=i[y++],P=i[y++];const M=i[y++],I=i[y++],W=v+M,z=P+I;u.moveTo(v,P),M===0||I===0?u.lineTo(W,z):(u.lineTo(W,P),u.lineTo(W,z),u.lineTo(v,z)),S.updatePathMinMax(u.mozCurrentTransform,v,P),S.updatePathMinMax(u.mozCurrentTransform,W,z),u.closePath();break;case s.OPS.moveTo:v=i[y++],P=i[y++],u.moveTo(v,P),S.updatePathMinMax(u.mozCurrentTransform,v,P);break;case s.OPS.lineTo:v=i[y++],P=i[y++],u.lineTo(v,P),S.updatePathMinMax(u.mozCurrentTransform,v,P);break;case s.OPS.curveTo:t=v,f=P,v=i[y+4],P=i[y+5],u.bezierCurveTo(i[y],i[y+1],i[y+2],i[y+3],v,P),S.updateCurvePathMinMax(u.mozCurrentTransform,t,f,i[y],i[y+1],i[y+2],i[y+3],v,P),y+=6;break;case s.OPS.curveTo2:t=v,f=P,u.bezierCurveTo(v,P,i[y],i[y+1],i[y+2],i[y+3]),S.updateCurvePathMinMax(u.mozCurrentTransform,t,f,v,P,i[y],i[y+1],i[y+2],i[y+3]),v=i[y+2],P=i[y+3],y+=4;break;case s.OPS.curveTo3:t=v,f=P,v=i[y+2],P=i[y+3],u.bezierCurveTo(i[y],i[y+1],v,P,v,P),S.updateCurvePathMinMax(u.mozCurrentTransform,t,f,i[y],i[y+1],v,P,v,P),y+=4;break;case s.OPS.closePath:u.closePath();break}S.setCurrentPoint(v,P)}closePath(){this.ctx.closePath()}stroke(o){o=typeof o!="undefined"?o:!0;const i=this.ctx,u=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof u=="object"&&(u==null?void 0:u.getPattern)){const S=this.getSinglePixelWidth();i.save(),i.strokeStyle=u.getPattern(i,this,i.mozCurrentTransformInverse,B.PathType.STROKE),i.lineWidth=Math.max(S,this.current.lineWidth),i.stroke(),i.restore()}else{const S=this.getSinglePixelWidth();S<0&&-S>=this.current.lineWidth?(i.save(),i.resetTransform(),i.lineWidth=Math.floor(this._combinedScaleFactor),i.stroke(),i.restore()):(i.lineWidth=Math.max(S,this.current.lineWidth),i.stroke())}o&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=typeof o!="undefined"?o:!0;const i=this.ctx,u=this.current.fillColor,S=this.current.patternFill;let v=!1;S&&(i.save(),i.fillStyle=u.getPattern(i,this,i.mozCurrentTransformInverse,B.PathType.FILL),v=!0);const P=this.current.getClippedPathBoundingBox();this.contentVisible&&P!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),v&&i.restore(),o&&this.consumePath(P)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Y}eoClip(){this.pendingClip=tt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,i=this.ctx;if(o===void 0){i.beginPath();return}i.save(),i.beginPath();for(let u=0;u<o.length;u++){const S=o[u];i.setTransform.apply(i,S.transform),i.translate(S.x,S.y),S.addToPath(i,S.fontSize)}i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,i){const u=this.commonObjs.get(o),S=this.current;if(!u)throw new Error(`Can't find font for ${o}`);if(S.fontMatrix=u.fontMatrix||s.FONT_IDENTITY_MATRIX,(S.fontMatrix[0]===0||S.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+o),i<0?(i=-i,S.fontDirection=-1):S.fontDirection=1,this.current.font=u,this.current.fontSize=i,u.isType3Font)return;const v=u.loadedName||"sans-serif";let P="normal";u.black?P="900":u.bold&&(P="bold");const t=u.italic?"italic":"normal",f=`"${v}", ${u.fallbackName}`;let m=i;i<H?m=H:i>O&&(m=O),this.current.fontSizeScale=i/m,this.ctx.font=`${t} ${P} ${m}px ${f}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,i){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=i}setLeadingMoveText(o,i){this.setLeading(-i),this.moveText(o,i)}setTextMatrix(o,i,u,S,v,P){this.current.textMatrix=[o,i,u,S,v,P],this.current.textMatrixScale=Math.hypot(o,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,i,u,S,v){const P=this.ctx,t=this.current,f=t.font,m=t.textRenderingMode,y=t.fontSize/t.fontSizeScale,h=m&s.TextRenderingMode.FILL_STROKE_MASK,M=!!(m&s.TextRenderingMode.ADD_TO_PATH_FLAG),I=t.patternFill&&!f.missingFile;let W;(f.disableFontFace||M||I)&&(W=f.getPathGenerator(this.commonObjs,o)),f.disableFontFace||I?(P.save(),P.translate(i,u),P.beginPath(),W(P,y),S&&P.setTransform.apply(P,S),(h===s.TextRenderingMode.FILL||h===s.TextRenderingMode.FILL_STROKE)&&P.fill(),(h===s.TextRenderingMode.STROKE||h===s.TextRenderingMode.FILL_STROKE)&&(v&&(P.resetTransform(),P.lineWidth=Math.floor(this._combinedScaleFactor)),P.stroke()),P.restore()):((h===s.TextRenderingMode.FILL||h===s.TextRenderingMode.FILL_STROKE)&&P.fillText(o,i,u),(h===s.TextRenderingMode.STROKE||h===s.TextRenderingMode.FILL_STROKE)&&(v?(P.save(),P.moveTo(i,u),P.resetTransform(),P.lineWidth=Math.floor(this._combinedScaleFactor),P.strokeText(o,0,0),P.restore()):P.strokeText(o,i,u))),M&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:P.mozCurrentTransform,x:i,y:u,fontSize:y,addToPath:W})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const i=o.getImageData(0,0,10,10).data;let u=!1;for(let S=3;S<i.length;S+=4)if(i[S]>0&&i[S]<255){u=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(o){const i=this.current,u=i.font;if(u.isType3Font)return this.showType3Text(o);const S=i.fontSize;if(S===0)return;const v=this.ctx,P=i.fontSizeScale,t=i.charSpacing,f=i.wordSpacing,m=i.fontDirection,y=i.textHScale*m,h=o.length,M=u.vertical,I=M?1:-1,W=u.defaultVMetrics,z=S*i.fontMatrix[0],K=i.textRenderingMode===s.TextRenderingMode.FILL&&!u.disableFontFace&&!i.patternFill;v.save(),v.transform.apply(v,i.textMatrix),v.translate(i.x,i.y+i.textRise),m>0?v.scale(y,-1):v.scale(y,1);let Z;if(i.patternFill){v.save();const ot=i.fillColor.getPattern(v,this,v.mozCurrentTransformInverse,B.PathType.FILL);Z=v.mozCurrentTransform,v.restore(),v.fillStyle=ot}let nt=i.lineWidth,et=!1;const st=i.textMatrixScale;if(st===0||nt===0){const ot=i.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(ot===s.TextRenderingMode.STROKE||ot===s.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,nt=this.getSinglePixelWidth(),et=nt<0)}else nt/=st;P!==1&&(v.scale(P,P),nt/=P),v.lineWidth=nt;let lt=0,it;for(it=0;it<h;++it){const ot=o[it];if(typeof ot=="number"){lt+=I*ot*S/1e3;continue}let ct=!1;const dt=(ot.isSpace?f:0)+t,_t=ot.fontChar,Ct=ot.accent;let mt,vt,bt=ot.width;if(M){const ft=ot.vmetric||W,Tt=-(ot.vmetric?ft[1]:bt*.5)*z,Ut=ft[2]*z;bt=ft?-ft[0]:bt,mt=Tt/P,vt=(lt+Ut)/P}else mt=lt/P,vt=0;if(u.remeasure&&bt>0){const ft=v.measureText(_t).width*1e3/S*P;if(bt<ft&&this.isFontSubpixelAAEnabled){const Tt=bt/ft;ct=!0,v.save(),v.scale(Tt,1),mt/=Tt}else bt!==ft&&(mt+=(bt-ft)/2e3*S/P)}if(this.contentVisible&&(ot.isInFont||u.missingFile)){if(K&&!Ct)v.fillText(_t,mt,vt);else if(this.paintChar(_t,mt,vt,Z,et),Ct){const ft=mt+S*Ct.offset.x/P,Tt=vt-S*Ct.offset.y/P;this.paintChar(Ct.fontChar,ft,Tt,Z,et)}}let St;M?St=bt*z-dt*m:St=bt*z+dt*m,lt+=St,ct&&v.restore()}M?i.y-=lt:i.x+=lt*y,v.restore(),this.compose()}showType3Text(o){const i=this.ctx,u=this.current,S=u.font,v=u.fontSize,P=u.fontDirection,t=S.vertical?1:-1,f=u.charSpacing,m=u.wordSpacing,y=u.textHScale*P,h=u.fontMatrix||s.FONT_IDENTITY_MATRIX,M=o.length,I=u.textRenderingMode===s.TextRenderingMode.INVISIBLE;let W,z,K,Z;if(!(I||v===0)){for(this._cachedGetSinglePixelWidth=null,i.save(),i.transform.apply(i,u.textMatrix),i.translate(u.x,u.y),i.scale(y,P),W=0;W<M;++W){if(z=o[W],typeof z=="number"){Z=t*z*v/1e3,this.ctx.translate(Z,0),u.x+=Z*y;continue}const nt=(z.isSpace?m:0)+f,et=S.charProcOperatorList[z.operatorListId];if(!et){(0,s.warn)(`Type3 character "${z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=z,this.save(),i.scale(v,v),i.transform.apply(i,h),this.executeOperatorList(et),this.restore()),K=s.Util.applyTransform([z.width,0],h)[0]*v+nt,i.translate(K,0),u.x+=K*y}i.restore(),this.processingType3=null}}setCharWidth(o,i){}setCharWidthAndBounds(o,i,u,S,v,P){this.ctx.rect(u,S,v-u,P-S),this.clip(),this.endPath()}getColorN_Pattern(o){let i;if(o[0]==="TilingPattern"){const u=o[1],S=this.baseTransform||this.ctx.mozCurrentTransform.slice(),v={createCanvasGraphics:P=>new Q(P,this.commonObjs,this.objs,this.canvasFactory)};i=new B.TilingPattern(o,u,this.ctx,v,S)}else i=this._getPattern(o[1],o[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,i,u){const S=s.Util.makeHexColor(o,i,u);this.ctx.strokeStyle=S,this.current.strokeColor=S}setFillRGBColor(o,i,u){const S=s.Util.makeHexColor(o,i,u);this.ctx.fillStyle=S,this.current.fillColor=S,this.current.patternFill=!1}_getPattern(o,i=null){let u;return this.cachedPatterns.has(o)?u=this.cachedPatterns.get(o):(u=(0,B.getShadingPattern)(this.objs.get(o)),this.cachedPatterns.set(o,u)),i&&(u.matrix=i),u}shadingFill(o){if(!this.contentVisible)return;const i=this.ctx;this.save();const u=this._getPattern(o);i.fillStyle=u.getPattern(i,this,i.mozCurrentTransformInverse,B.PathType.SHADING);const S=i.mozCurrentTransformInverse;if(S){const v=i.canvas,P=v.width,t=v.height,f=s.Util.applyTransform([0,0],S),m=s.Util.applyTransform([0,t],S),y=s.Util.applyTransform([P,0],S),h=s.Util.applyTransform([P,t],S),M=Math.min(f[0],m[0],y[0],h[0]),I=Math.min(f[1],m[1],y[1],h[1]),W=Math.max(f[0],m[0],y[0],h[0]),z=Math.max(f[1],m[1],y[1],h[1]);this.ctx.fillRect(M,I,W-M,z-I)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,i){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,i)){const u=i[2]-i[0],S=i[3]-i[1];this.ctx.rect(i[0],i[1],u,S),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,i[0],i[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,i[2],i[3]),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;o.isolated||(0,s.info)("TODO: Support non-isolated groups."),o.knockout&&(0,s.warn)("Knockout groups not supported.");const u=i.mozCurrentTransform;if(o.matrix&&i.transform.apply(i,o.matrix),!o.bbox)throw new Error("Bounding box is required.");let S=s.Util.getAxialAlignedBoundingBox(o.bbox,i.mozCurrentTransform);const v=[0,0,i.canvas.width,i.canvas.height];S=s.Util.intersect(S,v)||[0,0,0,0];const P=Math.floor(S[0]),t=Math.floor(S[1]);let f=Math.max(Math.ceil(S[2])-P,1),m=Math.max(Math.ceil(S[3])-t,1),y=1,h=1;f>b&&(y=f/b,f=b),m>b&&(h=m/b,m=b),this.current.startNewPathAndClipBox([0,0,f,m]);let M="groupAt"+this.groupLevel;o.smask&&(M+="_smask_"+this.smaskCounter++%2);const I=this.cachedCanvases.getCanvas(M,f,m,!0),W=I.context;W.scale(1/y,1/h),W.translate(-P,-t),W.transform.apply(W,u),o.smask?this.smaskStack.push({canvas:I.canvas,context:W,offsetX:P,offsetY:t,scaleX:y,scaleY:h,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(P,t),i.scale(y,h),i.save()),r(i,W),this.ctx=W,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const S=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,S);const v=s.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],S);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(v)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(o,i,u,S,v){if(this.save(),Array.isArray(i)&&i.length===4){const P=i[2]-i[0],t=i[3]-i[1];if(v&&this.annotationCanvasMap){u=u.slice(),u[4]-=i[0],u[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=P,i[3]=t;const[f,m]=s.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:y}=this,h=Math.ceil(P*this.outputScaleX*y),M=Math.ceil(t*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(h,M);const{canvas:I,context:W}=this.annotationCanvas;I.style.width=`calc(${P}px * var(--viewport-scale-factor))`,I.style.height=`calc(${t}px * var(--viewport-scale-factor))`,this.annotationCanvasMap.set(o,I),this.annotationCanvas.savedCtx=this.ctx,this.ctx=W,this.ctx.setTransform(f,0,0,-m,0,t*m),w(this.ctx),l(this.ctx)}else l(this.ctx),this.ctx.rect(i[0],i[1],P,t),this.clip(),this.endPath()}this.current=new j(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,u),this.transform.apply(this,S)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(o){if(!this.contentVisible)return;const i=this.ctx,u=o.width,S=o.height,v=this.processingType3;if(v&&v.compiled===void 0&&(u<=a&&S<=a?v.compiled=G({data:o.data,width:u,height:S}):v.compiled=null),v!=null&&v.compiled){v.compiled(i);return}const P=this._createMaskCanvas(o),t=P.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(t,P.offsetX,P.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(o,i,u=0,S=0,v,P){if(!this.contentVisible)return;const t=this.ctx;t.save();const f=t.mozCurrentTransform;t.transform(i,u,S,v,0,0);const m=this._createMaskCanvas(o);t.setTransform(1,0,0,1,0,0);for(let y=0,h=P.length;y<h;y+=2){const M=s.Util.transform(f,[i,u,S,v,P[y],P[y+1]]),[I,W]=s.Util.applyTransform([0,0],M);t.drawImage(m.canvas,I,W)}t.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const i=this.ctx,u=this.current.fillColor,S=this.current.patternFill;for(let v=0,P=o.length;v<P;v++){const t=o[v],f=t.width,m=t.height,y=this.cachedCanvases.getCanvas("maskCanvas",f,m),h=y.context;h.save(),T(h,t),h.globalCompositeOperation="source-in",h.fillStyle=S?u.getPattern(h,this,i.mozCurrentTransformInverse,B.PathType.FILL):u,h.fillRect(0,0,f,m),h.restore(),i.save(),i.transform.apply(i,t.transform),i.scale(1,-1),i.drawImage(y.canvas,0,0,f,m,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const i=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!i){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(o,i,u,S){if(!this.contentVisible)return;const v=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!v){(0,s.warn)("Dependent image isn't ready yet");return}const P=v.width,t=v.height,f=[];for(let m=0,y=S.length;m<y;m+=2)f.push({transform:[i,0,0,u,S[m],S[m+1]],x:0,y:0,w:P,h:t});this.paintInlineImageXObjectGroup(v,f)}paintInlineImageXObject(o){if(!this.contentVisible)return;const i=o.width,u=o.height,S=this.ctx;this.save(),S.scale(1/i,-1/u);let v;if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)v=o;else{const t=this.cachedCanvases.getCanvas("inlineImage",i,u),f=t.context;D(f,o,this.current.transferMaps),v=t.canvas}const P=this._scaleImage(v,S.mozCurrentTransformInverse);if(S.imageSmoothingEnabled=N(S.mozCurrentTransform,o.interpolate),S.drawImage(P.img,0,0,P.paintWidth,P.paintHeight,0,-u,i,u),this.imageLayer){const t=this.getCanvasPosition(0,-u);this.imageLayer.appendImage({imgData:o,left:t[0],top:t[1],width:i/S.mozCurrentTransformInverse[0],height:u/S.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}paintInlineImageXObjectGroup(o,i){if(!this.contentVisible)return;const u=this.ctx,S=o.width,v=o.height,P=this.cachedCanvases.getCanvas("inlineImage",S,v),t=P.context;D(t,o,this.current.transferMaps);for(let f=0,m=i.length;f<m;f++){const y=i[f];if(u.save(),u.transform.apply(u,y.transform),u.scale(1,-1),u.drawImage(P.canvas,y.x,y.y,y.w,y.h,0,-1,1,1),this.imageLayer){const h=this.getCanvasPosition(y.x,y.y);this.imageLayer.appendImage({imgData:o,left:h[0],top:h[1],width:S,height:v})}u.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,i){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,i){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const i=this.ctx;this.pendingClip&&(this.pendingClip===tt?i.clip("evenodd"):i.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){const o=this.ctx.mozCurrentTransform,i=Math.abs(o[0]*o[3]-o[2]*o[1]),u=o[0]**2+o[2]**2,S=o[1]**2+o[3]**2,v=Math.sqrt(Math.max(u,S))/i;u!==S&&this._combinedScaleFactor*v>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*v):i>Number.EPSILON?this._cachedGetSinglePixelWidth=v:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(o,i){const u=this.ctx.mozCurrentTransform;return[u[0]*o+u[2]*i+u[4],u[1]*o+u[3]*i+u[5]]}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}n.CanvasGraphics=Q;for(const A in s.OPS)Q.prototype[A]!==void 0&&(Q.prototype[s.OPS[A]]=Q.prototype[A])},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=g;var s=k(1);const B={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=B;function U(w,_){if(!_||typeof Path2D=="undefined")return;const G=_[2]-_[0],j=_[3]-_[1],D=new Path2D;D.rect(_[0],_[1],G,j),w.clip(D)}class H{constructor(){this.constructor===H&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class O extends H{constructor(_){super();this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let G;this._type==="axial"?G=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(G=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const j of this._colorStops)G.addColorStop(j[0],j[1]);return G}getPattern(_,G,j,D){let T;if(D===B.STROKE||D===B.FILL){const r=G.current.getClippedPathBoundingBox(D,_.mozCurrentTransform)||[0,0,0,0],l=Math.ceil(r[2]-r[0])||1,x=Math.ceil(r[3]-r[1])||1,F=G.cachedCanvases.getCanvas("pattern",l,x,!0),C=F.context;C.clearRect(0,0,C.canvas.width,C.canvas.height),C.beginPath(),C.rect(0,0,C.canvas.width,C.canvas.height),C.translate(-r[0],-r[1]),j=s.Util.transform(j,[1,0,0,1,r[0],r[1]]),C.transform.apply(C,G.baseTransform),this.matrix&&C.transform.apply(C,this.matrix),U(C,this._bbox),C.fillStyle=this._createGradient(C),C.fill(),T=_.createPattern(F.canvas,"no-repeat");const L=new DOMMatrix(j);try{T.setTransform(L)}catch(E){(0,s.warn)(`RadialAxialShadingPattern.getPattern: "${E==null?void 0:E.message}".`)}}else U(_,this._bbox),T=this._createGradient(_);return T}}function b(w,_,G,j,D,T,r,l){const x=_.coords,F=_.colors,C=w.data,L=w.width*4;let E;x[G+1]>x[j+1]&&(E=G,G=j,j=E,E=T,T=r,r=E),x[j+1]>x[D+1]&&(E=j,j=D,D=E,E=r,r=l,l=E),x[G+1]>x[j+1]&&(E=G,G=j,j=E,E=T,T=r,r=E);const N=(x[G]+_.offsetX)*_.scaleX,X=(x[G+1]+_.offsetY)*_.scaleY,V=(x[j]+_.offsetX)*_.scaleX,Y=(x[j+1]+_.offsetY)*_.scaleY,tt=(x[D]+_.offsetX)*_.scaleX,Q=(x[D+1]+_.offsetY)*_.scaleY;if(X>=Q)return;const A=F[T],o=F[T+1],i=F[T+2],u=F[r],S=F[r+1],v=F[r+2],P=F[l],t=F[l+1],f=F[l+2],m=Math.round(X),y=Math.round(Q);let h,M,I,W,z,K,Z,nt;for(let et=m;et<=y;et++){if(et<Y){let ct;et<X?ct=0:ct=(X-et)/(X-Y),h=N-(N-V)*ct,M=A-(A-u)*ct,I=o-(o-S)*ct,W=i-(i-v)*ct}else{let ct;et>Q?ct=1:Y===Q?ct=0:ct=(Y-et)/(Y-Q),h=V-(V-tt)*ct,M=u-(u-P)*ct,I=S-(S-t)*ct,W=v-(v-f)*ct}let st;et<X?st=0:et>Q?st=1:st=(X-et)/(X-Q),z=N-(N-tt)*st,K=A-(A-P)*st,Z=o-(o-t)*st,nt=i-(i-f)*st;const lt=Math.round(Math.min(h,z)),it=Math.round(Math.max(h,z));let ot=L*et+lt*4;for(let ct=lt;ct<=it;ct++)st=(h-ct)/(h-z),st<0?st=0:st>1&&(st=1),C[ot++]=M-(M-K)*st|0,C[ot++]=I-(I-Z)*st|0,C[ot++]=W-(W-nt)*st|0,C[ot++]=255}}function e(w,_,G){const j=_.coords,D=_.colors;let T,r;switch(_.type){case"lattice":const l=_.verticesPerRow,x=Math.floor(j.length/l)-1,F=l-1;for(T=0;T<x;T++){let C=T*l;for(let L=0;L<F;L++,C++)b(w,G,j[C],j[C+1],j[C+l],D[C],D[C+1],D[C+l]),b(w,G,j[C+l+1],j[C+1],j[C+l],D[C+l+1],D[C+1],D[C+l])}break;case"triangles":for(T=0,r=j.length;T<r;T+=3)b(w,G,j[T],j[T+1],j[T+2],D[T],D[T+1],D[T+2]);break;default:throw new Error("illegal figure")}}class c extends H{constructor(_){super();this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,G,j){const l=Math.floor(this._bounds[0]),x=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-l,C=Math.ceil(this._bounds[3])-x,L=Math.min(Math.ceil(Math.abs(F*_[0]*1.1)),3e3),E=Math.min(Math.ceil(Math.abs(C*_[1]*1.1)),3e3),N=F/L,X=C/E,V={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-x,scaleX:1/N,scaleY:1/X},Y=L+2*2,tt=E+2*2,Q=j.getCanvas("mesh",Y,tt,!1),A=Q.context,o=A.createImageData(L,E);if(G){const u=o.data;for(let S=0,v=u.length;S<v;S+=4)u[S]=G[0],u[S+1]=G[1],u[S+2]=G[2],u[S+3]=255}for(const u of this._figures)e(o,u,V);return A.putImageData(o,2,2),{canvas:Q.canvas,offsetX:l-2*N,offsetY:x-2*X,scaleX:N,scaleY:X}}getPattern(_,G,j,D){U(_,this._bbox);let T;if(D===B.SHADING)T=s.Util.singularValueDecompose2dScale(_.mozCurrentTransform);else if(T=s.Util.singularValueDecompose2dScale(G.baseTransform),this.matrix){const l=s.Util.singularValueDecompose2dScale(this.matrix);T=[T[0]*l[0],T[1]*l[1]]}const r=this._createMeshCanvas(T,D===B.SHADING?null:this._background,G.cachedCanvases);return D!==B.SHADING&&(_.setTransform.apply(_,G.baseTransform),this.matrix&&_.transform.apply(_,this.matrix)),_.translate(r.offsetX,r.offsetY),_.scale(r.scaleX,r.scaleY),_.createPattern(r.canvas,"no-repeat")}}class a extends H{getPattern(){return"hotpink"}}function g(w){switch(w[0]){case"RadialAxial":return new O(w);case"Mesh":return new c(w);case"Dummy":return new a}throw new Error(`Unknown IR type: ${w[0]}`)}const p={COLORED:1,UNCOLORED:2};class R{static get MAX_PATTERN_SIZE(){return(0,s.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(_,G,j,D,T){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=G,this.ctx=j,this.canvasGraphicsFactory=D,this.baseTransform=T}createPatternCanvas(_){const G=this.operatorList,j=this.bbox,D=this.xstep,T=this.ystep,r=this.paintType,l=this.tilingType,x=this.color,F=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+l);const C=j[0],L=j[1],E=j[2],N=j[3],X=s.Util.singularValueDecompose2dScale(this.matrix),V=s.Util.singularValueDecompose2dScale(this.baseTransform),Y=[X[0]*V[0],X[1]*V[1]],tt=this.getSizeAndScale(D,this.ctx.canvas.width,Y[0]),Q=this.getSizeAndScale(T,this.ctx.canvas.height,Y[1]),A=_.cachedCanvases.getCanvas("pattern",tt.size,Q.size,!0),o=A.context,i=F.createCanvasGraphics(o);i.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(i,r,x);let u=C,S=L,v=E,P=N;return C<0&&(u=0,v+=Math.abs(C)),L<0&&(S=0,P+=Math.abs(L)),o.translate(-(tt.scale*u),-(Q.scale*S)),i.transform(tt.scale,0,0,Q.scale,0,0),o.save(),this.clipBbox(i,u,S,v,P),i.baseTransform=i.ctx.mozCurrentTransform.slice(),i.executeOperatorList(G),i.endDrawing(),{canvas:A.canvas,scaleX:tt.scale,scaleY:Q.scale,offsetX:u,offsetY:S}}getSizeAndScale(_,G,j){_=Math.abs(_);const D=Math.max(R.MAX_PATTERN_SIZE,G);let T=Math.ceil(_*j);return T>=D?T=D:j=T/_,{scale:j,size:T}}clipBbox(_,G,j,D,T){const r=D-G,l=T-j;_.ctx.rect(G,j,r,l),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,G,j){const D=_.ctx,T=_.current;switch(G){case p.COLORED:const r=this.ctx;D.fillStyle=r.fillStyle,D.strokeStyle=r.strokeStyle,T.fillColor=r.fillStyle,T.strokeColor=r.strokeStyle;break;case p.UNCOLORED:const l=s.Util.makeHexColor(j[0],j[1],j[2]);D.fillStyle=l,D.strokeStyle=l,T.fillColor=l,T.strokeColor=l;break;default:throw new s.FormatError(`Unsupported paint type: ${G}`)}}getPattern(_,G,j,D){let T=j;D!==B.SHADING&&(T=s.Util.transform(T,G.baseTransform),this.matrix&&(T=s.Util.transform(T,this.matrix)));const r=this.createPatternCanvas(G);let l=new DOMMatrix(T);l=l.translate(r.offsetX,r.offsetY),l=l.scale(1/r.scaleX,1/r.scaleY);const x=_.createPattern(r.canvas,"repeat");try{x.setTransform(l)}catch(F){(0,s.warn)(`TilingPattern.getPattern: "${F==null?void 0:F.message}".`)}return x}}n.TilingPattern=R},(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const k=Object.create(null);n.GlobalWorkerOptions=k,k.workerPort=k.workerPort===void 0?null:k.workerPort,k.workerSrc=k.workerSrc===void 0?"":k.workerSrc},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var s=k(1);const B={UNKNOWN:0,DATA:1,ERROR:2},U={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function H(b){switch(b instanceof Error||typeof b=="object"&&b!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new s.AbortException(b.message);case"MissingPDFException":return new s.MissingPDFException(b.message);case"PasswordException":return new s.PasswordException(b.message,b.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new s.UnknownErrorException(b.message,b.details);default:return new s.UnknownErrorException(b.message,b.toString())}}class O{constructor(e,c,a){this.sourceName=e,this.targetName=c,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=g=>{const p=g.data;if(p.targetName!==this.sourceName)return;if(p.stream){this._processStreamMessage(p);return}if(p.callback){const w=p.callbackId,_=this.callbackCapabilities[w];if(!_)throw new Error(`Cannot resolve callback ${w}`);if(delete this.callbackCapabilities[w],p.callback===B.DATA)_.resolve(p.data);else if(p.callback===B.ERROR)_.reject(H(p.reason));else throw new Error("Unexpected callback case");return}const R=this.actionHandler[p.action];if(!R)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){const w=this.sourceName,_=p.sourceName;new Promise(function(G){G(R(p.data))}).then(function(G){a.postMessage({sourceName:w,targetName:_,callback:B.DATA,callbackId:p.callbackId,data:G})},function(G){a.postMessage({sourceName:w,targetName:_,callback:B.ERROR,callbackId:p.callbackId,reason:H(G)})});return}if(p.streamId){this._createStreamSink(p);return}R(p.data)},a.addEventListener("message",this._onComObjOnMessage)}on(e,c){const a=this.actionHandler;if(a[e])throw new Error(`There is already an actionName called "${e}"`);a[e]=c}send(e,c,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:c},a)}sendWithPromise(e,c,a){const g=this.callbackId++,p=(0,s.createPromiseCapability)();this.callbackCapabilities[g]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:g,data:c},a)}catch(R){p.reject(R)}return p.promise}sendWithStream(e,c,a,g){const p=this.streamId++,R=this.sourceName,w=this.targetName,_=this.comObj;return new ReadableStream({start:G=>{const j=(0,s.createPromiseCapability)();return this.streamControllers[p]={controller:G,startCall:j,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:R,targetName:w,action:e,streamId:p,data:c,desiredSize:G.desiredSize},g),j.promise},pull:G=>{const j=(0,s.createPromiseCapability)();return this.streamControllers[p].pullCall=j,_.postMessage({sourceName:R,targetName:w,stream:U.PULL,streamId:p,desiredSize:G.desiredSize}),j.promise},cancel:G=>{(0,s.assert)(G instanceof Error,"cancel must have a valid reason");const j=(0,s.createPromiseCapability)();return this.streamControllers[p].cancelCall=j,this.streamControllers[p].isClosed=!0,_.postMessage({sourceName:R,targetName:w,stream:U.CANCEL,streamId:p,reason:H(G)}),j.promise}},a)}_createStreamSink(e){const c=e.streamId,a=this.sourceName,g=e.sourceName,p=this.comObj,R=this,w=this.actionHandler[e.action],_={enqueue(G,j=1,D){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=j,T>0&&this.desiredSize<=0&&(this.sinkCapability=(0,s.createPromiseCapability)(),this.ready=this.sinkCapability.promise),p.postMessage({sourceName:a,targetName:g,stream:U.ENQUEUE,streamId:c,chunk:G},D)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:a,targetName:g,stream:U.CLOSE,streamId:c}),delete R.streamSinks[c])},error(G){(0,s.assert)(G instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:a,targetName:g,stream:U.ERROR,streamId:c,reason:H(G)}))},sinkCapability:(0,s.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[c]=_,new Promise(function(G){G(w(e.data,_))}).then(function(){p.postMessage({sourceName:a,targetName:g,stream:U.START_COMPLETE,streamId:c,success:!0})},function(G){p.postMessage({sourceName:a,targetName:g,stream:U.START_COMPLETE,streamId:c,reason:H(G)})})}_processStreamMessage(e){const c=e.streamId,a=this.sourceName,g=e.sourceName,p=this.comObj,R=this.streamControllers[c],w=this.streamSinks[c];switch(e.stream){case U.START_COMPLETE:e.success?R.startCall.resolve():R.startCall.reject(H(e.reason));break;case U.PULL_COMPLETE:e.success?R.pullCall.resolve():R.pullCall.reject(H(e.reason));break;case U.PULL:if(!w){p.postMessage({sourceName:a,targetName:g,stream:U.PULL_COMPLETE,streamId:c,success:!0});break}w.desiredSize<=0&&e.desiredSize>0&&w.sinkCapability.resolve(),w.desiredSize=e.desiredSize,new Promise(function(_){_(w.onPull&&w.onPull())}).then(function(){p.postMessage({sourceName:a,targetName:g,stream:U.PULL_COMPLETE,streamId:c,success:!0})},function(_){p.postMessage({sourceName:a,targetName:g,stream:U.PULL_COMPLETE,streamId:c,reason:H(_)})});break;case U.ENQUEUE:if((0,s.assert)(R,"enqueue should have stream controller"),R.isClosed)break;R.controller.enqueue(e.chunk);break;case U.CLOSE:if((0,s.assert)(R,"close should have stream controller"),R.isClosed)break;R.isClosed=!0,R.controller.close(),this._deleteStreamController(R,c);break;case U.ERROR:(0,s.assert)(R,"error should have stream controller"),R.controller.error(H(e.reason)),this._deleteStreamController(R,c);break;case U.CANCEL_COMPLETE:e.success?R.cancelCall.resolve():R.cancelCall.reject(H(e.reason)),this._deleteStreamController(R,c);break;case U.CANCEL:if(!w)break;new Promise(function(_){_(w.onCancel&&w.onCancel(H(e.reason)))}).then(function(){p.postMessage({sourceName:a,targetName:g,stream:U.CANCEL_COMPLETE,streamId:c,success:!0})},function(_){p.postMessage({sourceName:a,targetName:g,stream:U.CANCEL_COMPLETE,streamId:c,reason:H(_)})}),w.sinkCapability.reject(H(e.reason)),w.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e,c){await Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]),delete this.streamControllers[c]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}n.MessageHandler=O},(d,n,k)=>{var U,H;Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var s=k(1);class B{constructor({parsedData:b,rawData:e}){Pt(this,U,void 0);Pt(this,H,void 0);Et(this,U,b),Et(this,H,e)}getRaw(){return pt(this,H)}get(b){var e;return(e=pt(this,U).get(b))!=null?e:null}getAll(){return(0,s.objectFromMap)(pt(this,U))}has(b){return pt(this,U).has(b)}}U=new WeakMap,H=new WeakMap,n.Metadata=B},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var s=k(1);class B{constructor(O,b){this.visible=!0,this.name=O,this.intent=b}}class U{constructor(O){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,O!==null){this.name=O.name,this.creator=O.creator,this._order=O.order;for(const b of O.groups)this._groups.set(b.id,new B(b.name,b.intent));if(O.baseState==="OFF")for(const b of this._groups)b.visible=!1;for(const b of O.on)this._groups.get(b).visible=!0;for(const b of O.off)this._groups.get(b).visible=!1}}_evaluateVisibilityExpression(O){const b=O.length;if(b<2)return!0;const e=O[0];for(let c=1;c<b;c++){const a=O[c];let g;if(Array.isArray(a))g=this._evaluateVisibilityExpression(a);else if(this._groups.has(a))g=this._groups.get(a).visible;else return(0,s.warn)(`Optional content group not found: ${a}`),!0;switch(e){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return e==="And"}isVisible(O){if(this._groups.size===0)return!0;if(!O)return(0,s.warn)("Optional content group not defined."),!0;if(O.type==="OCG")return this._groups.has(O.id)?this._groups.get(O.id).visible:((0,s.warn)(`Optional content group not found: ${O.id}`),!0);if(O.type==="OCMD"){if(O.expression)return this._evaluateVisibilityExpression(O.expression);if(!O.policy||O.policy==="AnyOn"){for(const b of O.ids){if(!this._groups.has(b))return(0,s.warn)(`Optional content group not found: ${b}`),!0;if(this._groups.get(b).visible)return!0}return!1}else if(O.policy==="AllOn"){for(const b of O.ids){if(!this._groups.has(b))return(0,s.warn)(`Optional content group not found: ${b}`),!0;if(!this._groups.get(b).visible)return!1}return!0}else if(O.policy==="AnyOff"){for(const b of O.ids){if(!this._groups.has(b))return(0,s.warn)(`Optional content group not found: ${b}`),!0;if(!this._groups.get(b).visible)return!0}return!1}else if(O.policy==="AllOff"){for(const b of O.ids){if(!this._groups.has(b))return(0,s.warn)(`Optional content group not found: ${b}`),!0;if(this._groups.get(b).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${O.policy}.`),!0}return(0,s.warn)(`Unknown group type ${O.type}.`),!0}setVisibility(O,b=!0){if(!this._groups.has(O)){(0,s.warn)(`Optional content group not found: ${O}`);return}this._groups.get(O).visible=!!b}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,s.objectFromMap)(this._groups):null}getGroup(O){return this._groups.get(O)||null}}n.OptionalContentConfig=U},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var s=k(1),B=k(5);class U{constructor(e,c){(0,s.assert)(c,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1,this._contentDispositionFilename=e.contentDispositionFilename||null;const a=e.initialData;if((a==null?void 0:a.length)>0){const g=new Uint8Array(a).buffer;this._queuedChunks.push(g)}this._pdfDataRangeTransport=c,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((g,p)=>{this._onReceiveData({begin:g,chunk:p})}),this._pdfDataRangeTransport.addProgressListener((g,p)=>{this._onProgress({loaded:g,total:p})}),this._pdfDataRangeTransport.addProgressiveReadListener(g=>{this._onReceiveData({chunk:g})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const c=new Uint8Array(e.chunk).buffer;if(e.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c);else{const a=this._rangeReaders.some(function(g){return g._begin!==e.begin?!1:(g._enqueue(c),!0)});(0,s.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,c;return(c=(e=this._fullRequestReader)==null?void 0:e._loaded)!=null?c:0}_onProgress(e){if(e.total===void 0){const c=this._rangeReaders[0];c!=null&&c.onProgress&&c.onProgress({loaded:e.loaded})}else{const c=this._fullRequestReader;c!=null&&c.onProgress&&c.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const c=this._rangeReaders.indexOf(e);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new H(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,c){if(c<=this._progressiveDataLength)return null;const a=new O(this,e,c);return this._pdfDataRangeTransport.requestDataRange(e,c),this._rangeReaders.push(a),a}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const c of this._rangeReaders.slice(0))c.cancel(e);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=U;class H{constructor(e,c,a=!1,g=null){this._stream=e,this._done=a||!1,this._filename=(0,B.isPdfFile)(g)?g:null,this._queuedChunks=c||[],this._loaded=0;for(const p of this._queuedChunks)this._loaded+=p.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,s.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O{constructor(e,c,a){this._stream=e,this._begin=c,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,s.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;class k{static textContent(B){const U=[],H={items:U,styles:Object.create(null)};function O(b){var a;if(!b)return;let e=null;const c=b.name;if(c==="#text")e=b.value;else if(k.shouldBuildText(c))(a=b==null?void 0:b.attributes)!=null&&a.textContent?e=b.attributes.textContent:b.value&&(e=b.value);else return;if(e!==null&&U.push({str:e}),!!b.children)for(const g of b.children)O(g)}return O(B),H}static shouldBuildText(B){return!(B==="textarea"||B==="input"||B==="option"||B==="select")}}n.XfaText=k},(d,n,k)=>{var S,$t;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var s=k(1),B=k(5),U=k(9),H=k(19),O=k(20);const b=1e3,e=new WeakSet;function c(P){return{width:P[2]-P[0],height:P[3]-P[1]}}class a{static create(t){switch(t.data.annotationType){case s.AnnotationType.LINK:return new p(t);case s.AnnotationType.TEXT:return new R(t);case s.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new _(t);case"Btn":return t.data.radioButton?new j(t):t.data.checkBox?new G(t):new D(t);case"Ch":return new T(t)}return new w(t);case s.AnnotationType.POPUP:return new r(t);case s.AnnotationType.FREETEXT:return new x(t);case s.AnnotationType.LINE:return new F(t);case s.AnnotationType.SQUARE:return new C(t);case s.AnnotationType.CIRCLE:return new L(t);case s.AnnotationType.POLYLINE:return new E(t);case s.AnnotationType.CARET:return new X(t);case s.AnnotationType.INK:return new V(t);case s.AnnotationType.POLYGON:return new N(t);case s.AnnotationType.HIGHLIGHT:return new Y(t);case s.AnnotationType.UNDERLINE:return new tt(t);case s.AnnotationType.SQUIGGLY:return new Q(t);case s.AnnotationType.STRIKEOUT:return new A(t);case s.AnnotationType.STAMP:return new o(t);case s.AnnotationType.FILEATTACHMENT:return new i(t);default:return new g(t)}}}class g{constructor(t,{isRenderable:f=!1,ignoreBorder:m=!1,createQuadrilaterals:y=!1}={}){this.isRenderable=f,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,f&&(this.container=this._createContainer(m)),y&&(this.quadrilaterals=this._createQuadrilaterals(m))}_createContainer(t=!1){const f=this.data,m=this.page,y=this.viewport,h=document.createElement("section");let{width:M,height:I}=c(f.rect);h.setAttribute("data-annotation-id",f.id);const W=s.Util.normalizeRect([f.rect[0],m.view[3]-f.rect[1]+m.view[1],f.rect[2],m.view[3]-f.rect[3]+m.view[1]]);if(f.hasOwnCanvas){const z=y.transform.slice(),[K,Z]=s.Util.singularValueDecompose2dScale(z);M=Math.ceil(M*K),I=Math.ceil(I*Z),W[0]*=K,W[1]*=Z;for(let nt=0;nt<4;nt++)z[nt]=Math.sign(z[nt]);h.style.transform=`matrix(${z.join(",")})`}else h.style.transform=`matrix(${y.transform.join(",")})`;if(h.style.transformOrigin=`${-W[0]}px ${-W[1]}px`,!t&&f.borderStyle.width>0){h.style.borderWidth=`${f.borderStyle.width}px`,f.borderStyle.style!==s.AnnotationBorderStyleType.UNDERLINE&&(M-=2*f.borderStyle.width,I-=2*f.borderStyle.width);const z=f.borderStyle.horizontalCornerRadius,K=f.borderStyle.verticalCornerRadius;if(z>0||K>0){const nt=`${z}px / ${K}px`;h.style.borderRadius=nt}switch(f.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:h.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:h.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:h.style.borderBottomStyle="solid";break}f.borderColor||f.color||null?h.style.borderColor=s.Util.makeHexColor(f.color[0]|0,f.color[1]|0,f.color[2]|0):h.style.borderWidth=0}return h.style.left=`${W[0]}px`,h.style.top=`${W[1]}px`,f.hasOwnCanvas?h.style.width=h.style.height="auto":(h.style.width=`${M}px`,h.style.height=`${I}px`),h}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const f=[],m=this.data.rect;for(const y of this.data.quadPoints)this.data.rect=[y[2].x,y[2].y,y[1].x,y[1].y],f.push(this._createContainer(t));return this.data.rect=m,f}_createPopup(t,f){let m=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,m=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.style.height=m.style.height,t.style.width=m.style.width,m.appendChild(t));const h=new l({container:m,trigger:t,color:f.color,titleObj:f.titleObj,modificationDate:f.modificationDate,contentsObj:f.contentsObj,richText:f.richText,hideWrapper:!0}).render();h.style.left=m.style.width,m.appendChild(h)}_renderQuadrilaterals(t){for(const f of this.quadrilaterals)f.className=t;return this.quadrilaterals}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,f=null){const m=[];if(this._fieldObjects){const y=this._fieldObjects[t];if(y)for(const{page:h,id:M,exportValues:I}of y){if(h===-1||M===f)continue;const W=typeof I=="string"?I:null,z=document.getElementById(M);if(z&&!e.has(z)){(0,s.warn)(`_getElementsByName - element not allowed: ${M}`);continue}m.push({id:M,exportValue:W,domElement:z})}return m}for(const y of document.getElementsByName(t)){const{id:h,exportValue:M}=y;h!==f&&(!e.has(y)||m.push({id:h,exportValue:M,domElement:y}))}return m}static get platform(){const t=typeof navigator!="undefined"?navigator.platform:"";return(0,s.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class p extends g{constructor(t,f=null){const m=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));super(t,{isRenderable:m,ignoreBorder:!!(f!=null&&f.ignoreBorder),createQuadrilaterals:!0})}render(){var y;const{data:t,linkService:f}=this,m=document.createElement("a");if(t.url)f.addLinkAttributes||(0,s.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(y=f.addLinkAttributes)==null||y.call(f,m,t.url,t.newWindow);else if(t.action)this._bindNamedAction(m,t.action);else if(t.dest)this._bindLink(m,t.dest);else{let h=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(h=!0,this._bindJSAction(m,t)),t.resetForm?this._bindResetFormAction(m,t.resetForm):h||this._bindLink(m,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((h,M)=>{const I=M===0?m:m.cloneNode();return h.appendChild(I),h}):(this.container.className="linkAnnotation",this.container.appendChild(m),this.container)}_bindLink(t,f){t.href=this.linkService.getDestinationHash(f),t.onclick=()=>(f&&this.linkService.goToDestination(f),!1),(f||f==="")&&(t.className="internalLink")}_bindNamedAction(t,f){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(f),!1),t.className="internalLink"}_bindJSAction(t,f){t.href=this.linkService.getAnchorUrl("");const m=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const y of Object.keys(f.actions)){const h=m.get(y);!h||(t[h]=()=>{var M;return(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f.id,name:y}}),!1})}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,f){const m=t.onclick;if(m||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),m||(t.onclick=()=>!1);return}t.onclick=()=>{var K;m&&m();const{fields:y,refs:h,include:M}=f,I=[];if(y.length!==0||h.length!==0){const Z=new Set(h);for(const nt of y){const et=this._fieldObjects[nt]||[];for(const{id:st}of et)Z.add(st)}for(const nt of Object.values(this._fieldObjects))for(const et of nt)Z.has(et.id)===M&&I.push(et)}else for(const Z of Object.values(this._fieldObjects))I.push(...Z);const W=this.annotationStorage,z=[];for(const Z of I){const{id:nt}=Z;switch(z.push(nt),Z.type){case"text":{const st=Z.defaultValue||"";W.setValue(nt,{value:st,valueAsString:st});break}case"checkbox":case"radiobutton":{const st=Z.defaultValue===Z.exportValues;W.setValue(nt,{value:st});break}case"combobox":case"listbox":{const st=Z.defaultValue||"";W.setValue(nt,{value:st});break}default:continue}const et=document.getElementById(nt);!et||!e.has(et)||et.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:z,name:"ResetForm"}})),!1}}}class R extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class w extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:f,isMac:m}=g.platform;return f&&t.ctrlKey||m&&t.metaKey}_setEventListener(t,f,m,y){f.includes("mouse")?t.addEventListener(f,h=>{var M;(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:y(h),shift:h.shiftKey,modifier:this._getKeyModifier(h)}})}):t.addEventListener(f,h=>{var M;(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:y(h)}})})}_setEventListeners(t,f,m){var y;for(const[h,M]of f)(M==="Action"||((y=this.data.actions)==null?void 0:y[M]))&&this._setEventListener(t,h,M,m)}_setBackgroundColor(t){const f=this.data.backgroundColor||null;t.style.backgroundColor=f===null?"transparent":s.Util.makeHexColor(f[0],f[1],f[2])}_dispatchEventFromSandbox(t,f){const m=(h,M,I)=>{const W=I.detail[h];I.target.style[M]=H.ColorConverters[`${W[0]}_HTML`](W.slice(1))},y={display:h=>{const M=h.detail.display%2===1;h.target.style.visibility=M?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M,print:h.detail.display===0||h.detail.display===3})},print:h=>{this.annotationStorage.setValue(this.data.id,{print:h.detail.print})},hidden:h=>{h.target.style.visibility=h.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h.detail.hidden})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.detail.readonly?h.target.setAttribute("readonly",""):h.target.removeAttribute("readonly")},required:h=>{h.detail.required?h.target.setAttribute("required",""):h.target.removeAttribute("required")},bgColor:h=>{m("bgColor","backgroundColor",h)},fillColor:h=>{m("fillColor","backgroundColor",h)},fgColor:h=>{m("fgColor","color",h)},textColor:h=>{m("textColor","color",h)},borderColor:h=>{m("borderColor","borderColor",h)},strokeColor:h=>{m("strokeColor","borderColor",h)}};for(const h of Object.keys(f.detail)){const M=t[h]||y[h];M&&M(f)}}}class _ extends w{constructor(t){const f=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:f})}setPropertyOnSiblings(t,f,m,y){const h=this.annotationStorage;for(const M of this._getElementsByName(t.name,t.id))M.domElement&&(M.domElement[f]=m),h.setValue(M.id,{[y]:m})}render(){var y;const t=this.annotationStorage,f=this.data.id;this.container.className="textWidgetAnnotation";let m=null;if(this.renderForms){const h=t.getValue(f,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),M=h.valueAsString||h.value||"",I={userValue:null,formattedValue:null};this.data.multiLine?(m=document.createElement("textarea"),m.textContent=M):(m=document.createElement("input"),m.type="text",m.setAttribute("value",M)),e.add(m),m.disabled=this.data.readOnly,m.name=this.data.fieldName,m.tabIndex=b,I.userValue=M,m.setAttribute("id",f),m.addEventListener("input",z=>{t.setValue(f,{value:z.target.value}),this.setPropertyOnSiblings(m,"value",z.target.value,"value")}),m.addEventListener("resetform",z=>{const K=this.data.defaultFieldValue||"";m.value=I.userValue=K,delete I.formattedValue});let W=z=>{I.formattedValue&&(z.target.value=I.formattedValue),z.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){m.addEventListener("focus",K=>{I.userValue&&(K.target.value=I.userValue)}),m.addEventListener("updatefromsandbox",K=>{const Z={value(nt){I.userValue=nt.detail.value||"",t.setValue(f,{value:I.userValue.toString()}),I.formattedValue||(nt.target.value=I.userValue)},valueAsString(nt){I.formattedValue=nt.detail.valueAsString||"",nt.target!==document.activeElement&&(nt.target.value=I.formattedValue),t.setValue(f,{formattedValue:I.formattedValue})},selRange(nt){const[et,st]=nt.detail.selRange;et>=0&&st<nt.target.value.length&&nt.target.setSelectionRange(et,st)}};this._dispatchEventFromSandbox(Z,K)}),m.addEventListener("keydown",K=>{var nt;let Z=-1;K.key==="Escape"?Z=0:K.key==="Enter"?Z=2:K.key==="Tab"&&(Z=3),Z!==-1&&(I.userValue=K.target.value,(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:K.target.value,willCommit:!0,commitKey:Z,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}}))});const z=W;W=null,m.addEventListener("blur",K=>{var Z;I.userValue=K.target.value,this._mouseState.isDown&&((Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:K.target.value,willCommit:!0,commitKey:1,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}})),z(K)}),(y=this.data.actions)!=null&&y.Keystroke&&m.addEventListener("beforeinput",K=>{var it;I.formattedValue="";const{data:Z,target:nt}=K,{value:et,selectionStart:st,selectionEnd:lt}=nt;(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:et,change:Z,willCommit:!1,selStart:st,selEnd:lt}})}),this._setEventListeners(m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.value)}if(W&&m.addEventListener("blur",W),this.data.maxLen!==null&&(m.maxLength=this.data.maxLen),this.data.comb){const K=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;m.classList.add("comb"),m.style.letterSpacing=`calc(${K}px - 1ch)`}}else m=document.createElement("div"),m.textContent=this.data.fieldValue,m.style.verticalAlign="middle",m.style.display="table-cell";return this._setTextStyle(m),this._setBackgroundColor(m),this.container.appendChild(m),this.container}_setTextStyle(t){const f=["left","center","right"],{fontSize:m,fontColor:y}=this.data.defaultAppearanceData,h=t.style;m&&(h.fontSize=`${m}px`),h.color=s.Util.makeHexColor(y[0],y[1],y[2]),this.data.textAlignment!==null&&(h.textAlign=f[this.data.textAlignment])}}class G extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,f=this.data,m=f.id;let y=t.getValue(m,{value:f.exportValue===f.fieldValue}).value;typeof y=="string"&&(y=y!=="Off",t.setValue(m,{value:y})),this.container.className="buttonWidgetAnnotation checkBox";const h=document.createElement("input");return e.add(h),h.disabled=f.readOnly,h.type="checkbox",h.name=f.fieldName,y&&h.setAttribute("checked",!0),h.setAttribute("id",m),h.setAttribute("exportValue",f.exportValue),h.tabIndex=b,h.addEventListener("change",M=>{const{name:I,checked:W}=M.target;for(const z of this._getElementsByName(I,m)){const K=W&&z.exportValue===f.exportValue;z.domElement&&(z.domElement.checked=K),t.setValue(z.id,{value:K})}t.setValue(m,{value:W})}),h.addEventListener("resetform",M=>{const I=f.defaultFieldValue||"Off";M.target.checked=I===f.exportValue}),this.enableScripting&&this.hasJSActions&&(h.addEventListener("updatefromsandbox",M=>{const I={value(W){W.target.checked=W.detail.value!=="Off",t.setValue(m,{value:W.target.checked})}};this._dispatchEventFromSandbox(I,M)}),this._setEventListeners(h,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.checked)),this._setBackgroundColor(h),this.container.appendChild(h),this.container}}class j extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,f=this.data,m=f.id;let y=t.getValue(m,{value:f.fieldValue===f.buttonValue}).value;typeof y=="string"&&(y=y!==f.buttonValue,t.setValue(m,{value:y}));const h=document.createElement("input");if(e.add(h),h.disabled=f.readOnly,h.type="radio",h.name=f.fieldName,y&&h.setAttribute("checked",!0),h.setAttribute("id",m),h.tabIndex=b,h.addEventListener("change",M=>{const{name:I,checked:W}=M.target;for(const z of this._getElementsByName(I,m))t.setValue(z.id,{value:!1});t.setValue(m,{value:W})}),h.addEventListener("resetform",M=>{const I=f.defaultFieldValue;M.target.checked=I!=null&&I===f.buttonValue}),this.enableScripting&&this.hasJSActions){const M=f.buttonValue;h.addEventListener("updatefromsandbox",I=>{const W={value:z=>{const K=M===z.detail.value;for(const Z of this._getElementsByName(z.target.name)){const nt=K&&Z.id===m;Z.domElement&&(Z.domElement.checked=nt),t.setValue(Z.id,{value:nt})}}};this._dispatchEventFromSandbox(W,I)}),this._setEventListeners(h,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],I=>I.target.checked)}return this._setBackgroundColor(h),this.container.appendChild(h),this.container}}class D extends p{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),t}}class T extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,f=this.data.id;t.getValue(f,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:m}=this.data.defaultAppearanceData;m||(m=9);const y=`calc(${m}px * var(--zoom-factor))`,h=document.createElement("select");e.add(h),h.disabled=this.data.readOnly,h.name=this.data.fieldName,h.setAttribute("id",f),h.tabIndex=b,h.style.fontSize=`${m}px`,this.data.combo||(h.size=this.data.options.length,this.data.multiSelect&&(h.multiple=!0)),h.addEventListener("resetform",W=>{const z=this.data.defaultFieldValue;for(const K of h.options)K.selected=K.value===z});for(const W of this.data.options){const z=document.createElement("option");z.textContent=W.displayValue,z.value=W.exportValue,this.data.combo&&(z.style.fontSize=y),this.data.fieldValue.includes(W.exportValue)&&z.setAttribute("selected",!0),h.appendChild(z)}const M=(W,z)=>{const K=z?"value":"textContent",Z=W.target.options;return W.target.multiple?Array.prototype.filter.call(Z,nt=>nt.selected).map(nt=>nt[K]):Z.selectedIndex===-1?null:Z[Z.selectedIndex][K]},I=W=>{const z=W.target.options;return Array.prototype.map.call(z,K=>({displayValue:K.textContent,exportValue:K.value}))};return this.enableScripting&&this.hasJSActions?(h.addEventListener("updatefromsandbox",W=>{const z={value(K){const Z=K.detail.value,nt=new Set(Array.isArray(Z)?Z:[Z]);for(const et of h.options)et.selected=nt.has(et.value);t.setValue(f,{value:M(K,!0)})},multipleSelection(K){h.multiple=!0},remove(K){const Z=h.options,nt=K.detail.remove;Z[nt].selected=!1,h.remove(nt),Z.length>0&&Array.prototype.findIndex.call(Z,st=>st.selected)===-1&&(Z[0].selected=!0),t.setValue(f,{value:M(K,!0),items:I(K)})},clear(K){for(;h.length!==0;)h.remove(0);t.setValue(f,{value:null,items:[]})},insert(K){const{index:Z,displayValue:nt,exportValue:et}=K.detail.insert,st=document.createElement("option");st.textContent=nt,st.value=et,h.insertBefore(st,h.children[Z]),t.setValue(f,{value:M(K,!0),items:I(K)})},items(K){const{items:Z}=K.detail;for(;h.length!==0;)h.remove(0);for(const nt of Z){const{displayValue:et,exportValue:st}=nt,lt=document.createElement("option");lt.textContent=et,lt.value=st,h.appendChild(lt)}h.options.length>0&&(h.options[0].selected=!0),t.setValue(f,{value:M(K,!0),items:I(K)})},indices(K){const Z=new Set(K.detail.indices);for(const nt of K.target.options)nt.selected=Z.has(nt.index);t.setValue(f,{value:M(K,!0)})},editable(K){K.target.disabled=!K.detail.editable}};this._dispatchEventFromSandbox(z,W)}),h.addEventListener("input",W=>{var Z;const z=M(W,!0),K=M(W,!1);t.setValue(f,{value:z}),(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:f,name:"Keystroke",value:K,changeEx:z,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],W=>W.target.checked)):h.addEventListener("input",function(W){t.setValue(f,{value:M(W)})}),this._setBackgroundColor(h),this.container.appendChild(h),this.container}}class r extends g{constructor(t){var m,y,h;const f=!!(((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f})}render(){const t=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",t.includes(this.data.parentType))return this.container;const f=`[data-annotation-id="${this.data.parentId}"]`,m=this.layer.querySelectorAll(f);if(m.length===0)return this.container;const y=new l({container:this.container,trigger:Array.from(m),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),h=this.page,M=s.Util.normalizeRect([this.data.parentRect[0],h.view[3]-this.data.parentRect[1]+h.view[1],this.data.parentRect[2],h.view[3]-this.data.parentRect[3]+h.view[1]]),I=M[0]+this.data.parentRect[2]-this.data.parentRect[0],W=M[1];return this.container.style.transformOrigin=`${-I}px ${-W}px`,this.container.style.left=`${I}px`,this.container.style.top=`${W}px`,this.container.appendChild(y.render()),this.container}}class l{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var I,W;const f=document.createElement("div");f.className="popupWrapper",this.hideElement=this.hideWrapper?f:this.container,this.hideElement.hidden=!0;const m=document.createElement("div");m.className="popup";const y=this.color;if(y){const z=.7*(255-y[0])+y[0],K=.7*(255-y[1])+y[1],Z=.7*(255-y[2])+y[2];m.style.backgroundColor=s.Util.makeHexColor(z|0,K|0,Z|0)}const h=document.createElement("h1");h.dir=this.titleObj.dir,h.textContent=this.titleObj.str,m.appendChild(h);const M=B.PDFDateString.toDateObject(this.modificationDate);if(M){const z=document.createElement("span");z.className="popupDate",z.textContent="{{date}}, {{time}}",z.dataset.l10nId="annotation_date_string",z.dataset.l10nArgs=JSON.stringify({date:M.toLocaleDateString(),time:M.toLocaleTimeString()}),m.appendChild(z)}if(((I=this.richText)==null?void 0:I.str)&&(!((W=this.contentsObj)!=null&&W.str)||this.contentsObj.str===this.richText.str))O.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:m}),m.lastChild.className="richText popupContent";else{const z=this._formatContents(this.contentsObj);m.appendChild(z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const z of this.trigger)z.addEventListener("click",this._toggle.bind(this)),z.addEventListener("mouseover",this._show.bind(this,!1)),z.addEventListener("mouseout",this._hide.bind(this,!1));return m.addEventListener("click",this._hide.bind(this,!0)),f.appendChild(m),f}_formatContents({str:t,dir:f}){const m=document.createElement("p");m.className="popupContent",m.dir=f;const y=t.split(/(?:\r\n?|\n)/);for(let h=0,M=y.length;h<M;++h){const I=y[h];m.appendChild(document.createTextNode(I)),h<M-1&&m.appendChild(document.createElement("br"))}return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class x extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:f,height:m}=c(t.rect),y=this.svgFactory.create(f,m),h=this.svgFactory.createElement("svg:line");return h.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),h.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),h.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),h.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),h.setAttribute("stroke-width",t.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),y.appendChild(h),this.container.append(y),this._createPopup(h,t),this.container}}class C extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:f,height:m}=c(t.rect),y=this.svgFactory.create(f,m),h=t.borderStyle.width,M=this.svgFactory.createElement("svg:rect");return M.setAttribute("x",h/2),M.setAttribute("y",h/2),M.setAttribute("width",f-h),M.setAttribute("height",m-h),M.setAttribute("stroke-width",h||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),y.appendChild(M),this.container.append(y),this._createPopup(M,t),this.container}}class L extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:f,height:m}=c(t.rect),y=this.svgFactory.create(f,m),h=t.borderStyle.width,M=this.svgFactory.createElement("svg:ellipse");return M.setAttribute("cx",f/2),M.setAttribute("cy",m/2),M.setAttribute("rx",f/2-h/2),M.setAttribute("ry",m/2-h/2),M.setAttribute("stroke-width",h||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),y.appendChild(M),this.container.append(y),this._createPopup(M,t),this.container}}class E extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0});this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:f,height:m}=c(t.rect),y=this.svgFactory.create(f,m);let h=[];for(const I of t.vertices){const W=I.x-t.rect[0],z=t.rect[3]-I.y;h.push(W+","+z)}h=h.join(" ");const M=this.svgFactory.createElement(this.svgElementName);return M.setAttribute("points",h),M.setAttribute("stroke-width",t.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),y.appendChild(M),this.container.append(y),this._createPopup(M,t),this.container}}class N extends E{constructor(t){super(t);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0});this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:f,height:m}=c(t.rect),y=this.svgFactory.create(f,m);for(const h of t.inkLists){let M=[];for(const W of h){const z=W.x-t.rect[0],K=t.rect[3]-W.y;M.push(`${z},${K}`)}M=M.join(" ");const I=this.svgFactory.createElement(this.svgElementName);I.setAttribute("points",M),I.setAttribute("stroke-width",t.borderStyle.width||1),I.setAttribute("stroke","transparent"),I.setAttribute("fill","transparent"),this._createPopup(I,t),y.appendChild(I)}return this.container.append(y),this.container}}class Y extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class tt extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Q extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class A extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class o extends g{constructor(t){var m,y,h;const f=!!(t.data.hasPopup||((m=t.data.titleObj)==null?void 0:m.str)||((y=t.data.contentsObj)==null?void 0:y.str)||((h=t.data.richText)==null?void 0:h.str));super(t,{isRenderable:f,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class i extends g{constructor(t){super(t,{isRenderable:!0});var y;const{filename:f,content:m}=this.data.file;this.filename=(0,B.getFilenameFromUrl)(f),this.content=m,(y=this.linkService.eventBus)==null||y.dispatch("fileattachmentannotation",{source:this,id:(0,s.stringToPDFString)(f),filename:f,content:m})}render(){var f,m;this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((f=this.data.titleObj)==null?void 0:f.str)||((m=this.data.contentsObj)==null?void 0:m.str)||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}class u{static render(t){const f=[],m=[];for(const h of t.annotations){if(!h)continue;const{width:M,height:I}=c(h.rect);if(!(M<=0||I<=0)){if(h.annotationType===s.AnnotationType.POPUP){m.push(h);continue}f.push(h)}}m.length&&f.push(...m);const y=t.div;for(const h of f){const M=a.create({data:h,layer:y,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new B.DOMSVGFactory,annotationStorage:t.annotationStorage||new U.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(M.isRenderable){const I=M.render();if(h.hidden&&(I.style.visibility="hidden"),Array.isArray(I))for(const W of I)y.appendChild(W);else M instanceof r?y.prepend(I):y.appendChild(I)}}Dt(this,S,$t).call(this,y,t.annotationCanvasMap)}static update(t){const{page:f,viewport:m,annotations:y,annotationCanvasMap:h,div:M}=t,I=m.transform,W=`matrix(${I.join(",")})`;let z,K;for(const Z of y){const nt=M.querySelectorAll(`[data-annotation-id="${Z.id}"]`);if(nt)for(const et of nt)if(Z.hasOwnCanvas){const st=s.Util.normalizeRect([Z.rect[0],f.view[3]-Z.rect[1]+f.view[1],Z.rect[2],f.view[3]-Z.rect[3]+f.view[1]]);if(!K){z=Math.abs(I[0]||I[1]);const ot=I.slice();for(let ct=0;ct<4;ct++)ot[ct]=Math.sign(ot[ct]);K=`matrix(${ot.join(",")})`}const lt=st[0]*z,it=st[1]*z;et.style.left=`${lt}px`,et.style.top=`${it}px`,et.style.transformOrigin=`${-lt}px ${-it}px`,et.style.transform=K}else et.style.transform=W}Dt(this,S,$t).call(this,M,h),M.hidden=!1}}S=new WeakSet,$t=function(t,f){if(!!f){for(const[m,y]of f){const h=t.querySelector(`[data-annotation-id="${m}"]`);if(!h)continue;const{firstChild:M}=h;M.nodeName==="CANVAS"?h.replaceChild(y,M):h.insertBefore(y,M)}f.clear()}},Pt(u,S),n.AnnotationLayer=u},(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function k(B){return Math.floor(Math.max(0,Math.min(1,B))*255).toString(16).padStart(2,"0")}class s{static CMYK_G([U,H,O,b]){return["G",1-Math.min(1,.3*U+.59*O+.11*H+b)]}static G_CMYK([U]){return["CMYK",0,0,0,1-U]}static G_RGB([U]){return["RGB",U,U,U]}static G_HTML([U]){const H=k(U);return`#${H}${H}${H}`}static RGB_G([U,H,O]){return["G",.3*U+.59*H+.11*O]}static RGB_HTML([U,H,O]){const b=k(U),e=k(H),c=k(O);return`#${b}${e}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([U,H,O,b]){return["RGB",1-Math.min(1,U+b),1-Math.min(1,O+b),1-Math.min(1,H+b)]}static CMYK_HTML(U){return this.RGB_HTML(this.CMYK_RGB(U))}static RGB_CMYK([U,H,O]){const b=1-U,e=1-H,c=1-O,a=Math.min(b,e,c);return["CMYK",b,e,c,a]}}n.ColorConverters=s},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var s=k(1),B=k(17);class U{static setupStorage(O,b,e,c,a){const g=c.getValue(b,{value:null});switch(e.name){case"textarea":if(g.value!==null&&(O.textContent=g.value),a==="print")break;O.addEventListener("input",p=>{c.setValue(b,{value:p.target.value})});break;case"input":if(e.attributes.type==="radio"||e.attributes.type==="checkbox"){if(g.value===e.attributes.xfaOn?O.setAttribute("checked",!0):g.value===e.attributes.xfaOff&&O.removeAttribute("checked"),a==="print")break;O.addEventListener("change",p=>{c.setValue(b,{value:p.target.checked?p.target.getAttribute("xfaOn"):p.target.getAttribute("xfaOff")})})}else{if(g.value!==null&&O.setAttribute("value",g.value),a==="print")break;O.addEventListener("input",p=>{c.setValue(b,{value:p.target.value})})}break;case"select":if(g.value!==null)for(const p of e.children)p.attributes.value===g.value&&(p.attributes.selected=!0);O.addEventListener("input",p=>{const R=p.target.options,w=R.selectedIndex===-1?"":R[R.selectedIndex].value;c.setValue(b,{value:w})});break}}static setAttributes({html:O,element:b,storage:e=null,intent:c,linkService:a}){var R;const{attributes:g}=b,p=O instanceof HTMLAnchorElement;g.type==="radio"&&(g.name=`${g.name}-${c}`);for(const[w,_]of Object.entries(g))if(!(_==null||w==="dataId"))if(w!=="style")if(w==="textContent")O.textContent=_;else if(w==="class")_.length&&O.setAttribute(w,_.join(" "));else{if(p&&(w==="href"||w==="newWindow"))continue;O.setAttribute(w,_)}else Object.assign(O.style,_);p&&(a.addLinkAttributes||(0,s.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(R=a.addLinkAttributes)==null||R.call(a,O,g.href,g.newWindow)),e&&g.dataId&&this.setupStorage(O,g.dataId,b,e)}static render(O){var _;const b=O.annotationStorage,e=O.linkService,c=O.xfaHtml,a=O.intent||"display",g=document.createElement(c.name);c.attributes&&this.setAttributes({html:g,element:c,intent:a,linkService:e});const p=[[c,-1,g]],R=O.div;if(R.appendChild(g),O.viewport){const G=`matrix(${O.viewport.transform.join(",")})`;R.style.transform=G}a!=="richText"&&R.setAttribute("class","xfaLayer xfaFont");const w=[];for(;p.length>0;){const[G,j,D]=p[p.length-1];if(j+1===G.children.length){p.pop();continue}const T=G.children[++p[p.length-1][1]];if(T===null)continue;const{name:r}=T;if(r==="#text"){const x=document.createTextNode(T.value);w.push(x),D.appendChild(x);continue}let l;if((_=T==null?void 0:T.attributes)!=null&&_.xmlns?l=document.createElementNS(T.attributes.xmlns,r):l=document.createElement(r),D.appendChild(l),T.attributes&&this.setAttributes({html:l,element:T,storage:b,intent:a,linkService:e}),T.children&&T.children.length>0)p.push([T,-1,l]);else if(T.value){const x=document.createTextNode(T.value);B.XfaText.shouldBuildText(r)&&w.push(x),l.appendChild(x)}}for(const G of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))G.setAttribute("readOnly",!0);return{textDivs:w}}static update(O){const b=`matrix(${O.viewport.transform.join(",")})`;O.div.style.transform=b,O.div.hidden=!1}}n.XfaLayer=U},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.renderTextLayer=G;var s=k(1);const B=1e5,U=30,H=.8,O=new Map,b=/^\s+$/g;function e(j,D){const T=O.get(j);if(T)return T;D.save(),D.font=`${U}px ${j}`;const r=D.measureText("");let l=r.fontBoundingBoxAscent,x=Math.abs(r.fontBoundingBoxDescent);if(l){D.restore();const C=l/(l+x);return O.set(j,C),C}D.strokeStyle="red",D.clearRect(0,0,U,U),D.strokeText("g",0,0);let F=D.getImageData(0,0,U,U).data;x=0;for(let C=F.length-1-3;C>=0;C-=4)if(F[C]>0){x=Math.ceil(C/4/U);break}D.clearRect(0,0,U,U),D.strokeText("A",0,U),F=D.getImageData(0,0,U,U).data,l=0;for(let C=0,L=F.length;C<L;C+=4)if(F[C]>0){l=U-Math.floor(C/4/U);break}if(D.restore(),l){const C=l/(l+x);return O.set(j,C),C}return O.set(j,H),H}function c(j,D,T,r){const l=document.createElement("span"),x=j._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL};j._textDivs.push(l);const F=s.Util.transform(j._viewport.transform,D.transform);let C=Math.atan2(F[1],F[0]);const L=T[D.fontName];L.vertical&&(C+=Math.PI/2);const E=Math.hypot(F[2],F[3]),N=E*e(L.fontFamily,r);let X,V;C===0?(X=F[4],V=F[5]-N):(X=F[4]+N*Math.sin(C),V=F[5]-N*Math.cos(C)),l.style.left=`${X}px`,l.style.top=`${V}px`,l.style.fontSize=`${E}px`,l.style.fontFamily=L.fontFamily,l.setAttribute("role","presentation"),l.textContent=D.str,l.dir=D.dir,j._fontInspectorEnabled&&(l.dataset.fontName=D.fontName),C!==0&&(x.angle=C*(180/Math.PI));let Y=!1;if(D.str.length>1||j._enhanceTextSelection&&b.test(D.str))Y=!0;else if(D.str!==" "&&D.transform[0]!==D.transform[3]){const tt=Math.abs(D.transform[0]),Q=Math.abs(D.transform[3]);tt!==Q&&Math.max(tt,Q)/Math.min(tt,Q)>1.5&&(Y=!0)}if(Y&&(L.vertical?x.canvasWidth=D.height*j._viewport.scale:x.canvasWidth=D.width*j._viewport.scale),j._textDivProperties.set(l,x),j._textContentStream&&j._layoutText(l),j._enhanceTextSelection&&x.hasText){let tt=1,Q=0;C!==0&&(tt=Math.cos(C),Q=Math.sin(C));const A=(L.vertical?D.height:D.width)*j._viewport.scale,o=E;let i,u;C!==0?(i=[tt,Q,-Q,tt,X,V],u=s.Util.getAxialAlignedBoundingBox([0,0,A,o],i)):u=[X,V,X+A,V+o],j._bounds.push({left:u[0],top:u[1],right:u[2],bottom:u[3],div:l,size:[A,o],m:i})}}function a(j){if(j._canceled)return;const D=j._textDivs,T=j._capability,r=D.length;if(r>B){j._renderingDone=!0,T.resolve();return}if(!j._textContentStream)for(let l=0;l<r;l++)j._layoutText(D[l]);j._renderingDone=!0,T.resolve()}function g(j,D,T){let r=0;for(let l=0;l<T;l++){const x=j[D++];x>0&&(r=r?Math.min(x,r):x)}return r}function p(j){const D=j._bounds,T=j._viewport,r=R(T.width,T.height,D);for(let l=0;l<r.length;l++){const x=D[l].div,F=j._textDivProperties.get(x);if(F.angle===0){F.paddingLeft=D[l].left-r[l].left,F.paddingTop=D[l].top-r[l].top,F.paddingRight=r[l].right-D[l].right,F.paddingBottom=r[l].bottom-D[l].bottom,j._textDivProperties.set(x,F);continue}const C=r[l],L=D[l],E=L.m,N=E[0],X=E[1],V=[[0,0],[0,L.size[1]],[L.size[0],0],L.size],Y=new Float64Array(64);for(let Q=0,A=V.length;Q<A;Q++){const o=s.Util.applyTransform(V[Q],E);Y[Q+0]=N&&(C.left-o[0])/N,Y[Q+4]=X&&(C.top-o[1])/X,Y[Q+8]=N&&(C.right-o[0])/N,Y[Q+12]=X&&(C.bottom-o[1])/X,Y[Q+16]=X&&(C.left-o[0])/-X,Y[Q+20]=N&&(C.top-o[1])/N,Y[Q+24]=X&&(C.right-o[0])/-X,Y[Q+28]=N&&(C.bottom-o[1])/N,Y[Q+32]=N&&(C.left-o[0])/-N,Y[Q+36]=X&&(C.top-o[1])/-X,Y[Q+40]=N&&(C.right-o[0])/-N,Y[Q+44]=X&&(C.bottom-o[1])/-X,Y[Q+48]=X&&(C.left-o[0])/X,Y[Q+52]=N&&(C.top-o[1])/-N,Y[Q+56]=X&&(C.right-o[0])/X,Y[Q+60]=N&&(C.bottom-o[1])/-N}const tt=1+Math.min(Math.abs(N),Math.abs(X));F.paddingLeft=g(Y,32,16)/tt,F.paddingTop=g(Y,48,16)/tt,F.paddingRight=g(Y,0,16)/tt,F.paddingBottom=g(Y,16,16)/tt,j._textDivProperties.set(x,F)}}function R(j,D,T){const r=T.map(function(x,F){return{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom,index:F,x1New:void 0,x2New:void 0}});w(j,r);const l=new Array(T.length);for(const x of r){const F=x.index;l[F]={left:x.x1New,top:0,right:x.x2New,bottom:0}}T.map(function(x,F){const C=l[F],L=r[F];L.x1=x.top,L.y1=j-C.right,L.x2=x.bottom,L.y2=j-C.left,L.index=F,L.x1New=void 0,L.x2New=void 0}),w(D,r);for(const x of r){const F=x.index;l[F].top=x.x1New,l[F].bottom=x.x2New}return l}function w(j,D){D.sort(function(l,x){return l.x1-x.x1||l.index-x.index});const r=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const l of D){let x=0;for(;x<r.length&&r[x].end<=l.y1;)x++;let F=r.length-1;for(;F>=0&&r[F].start>=l.y2;)F--;let C,L,E,N,X=-1/0;for(E=x;E<=F;E++){C=r[E],L=C.boundary;let tt;L.x2>l.x1?tt=L.index>l.index?L.x1New:l.x1:L.x2New===void 0?tt=(L.x2+l.x1)/2:tt=L.x2New,tt>X&&(X=tt)}for(l.x1New=X,E=x;E<=F;E++)C=r[E],L=C.boundary,L.x2New===void 0?L.x2>l.x1?L.index>l.index&&(L.x2New=L.x2):L.x2New=X:L.x2New>X&&(L.x2New=Math.max(X,L.x2));const V=[];let Y=null;for(E=x;E<=F;E++){C=r[E],L=C.boundary;const tt=L.x2>l.x2?L:l;Y===tt?V[V.length-1].end=C.end:(V.push({start:C.start,end:C.end,boundary:tt}),Y=tt)}for(r[x].start<l.y1&&(V[0].start=l.y1,V.unshift({start:r[x].start,end:l.y1,boundary:r[x].boundary})),l.y2<r[F].end&&(V[V.length-1].end=l.y2,V.push({start:l.y2,end:r[F].end,boundary:r[F].boundary})),E=x;E<=F;E++){if(C=r[E],L=C.boundary,L.x2New!==void 0)continue;let tt=!1;for(N=x-1;!tt&&N>=0&&r[N].start>=L.y1;N--)tt=r[N].boundary===L;for(N=F+1;!tt&&N<r.length&&r[N].end<=L.y2;N++)tt=r[N].boundary===L;for(N=0;!tt&&N<V.length;N++)tt=V[N].boundary===L;tt||(L.x2New=X)}Array.prototype.splice.apply(r,[x,F-x+1].concat(V))}for(const l of r){const x=l.boundary;x.x2New===void 0&&(x.x2New=Math.max(j,x.x2))}}class _{constructor({textContent:D,textContentStream:T,container:r,viewport:l,textDivs:x,textContentItemsStr:F,enhanceTextSelection:C}){var L;this._textContent=D,this._textContentStream=T,this._container=r,this._document=r.ownerDocument,this._viewport=l,this._textDivs=x||[],this._textContentItemsStr=F||[],this._enhanceTextSelection=!!C,this._fontInspectorEnabled=!!((L=globalThis.FontInspector)!=null&&L.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,s.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(D,T){for(let r=0,l=D.length;r<l;r++){if(D[r].str===void 0){if(D[r].type==="beginMarkedContentProps"||D[r].type==="beginMarkedContent"){const x=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),D[r].id!==null&&this._container.setAttribute("id",`${D[r].id}`),x.appendChild(this._container)}else D[r].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(D[r].str),c(this,D[r],T,this._layoutTextCtx)}}_layoutText(D){const T=this._textDivProperties.get(D);let r="";if(T.canvasWidth!==0&&T.hasText){const{fontSize:l,fontFamily:x}=D.style;(l!==this._layoutTextLastFontSize||x!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${l} ${x}`,this._layoutTextLastFontSize=l,this._layoutTextLastFontFamily=x);const{width:F}=this._layoutTextCtx.measureText(D.textContent);if(F>0){const C=T.canvasWidth/F;this._enhanceTextSelection&&(T.scale=C),r=`scaleX(${C})`}}if(T.angle!==0&&(r=`rotate(${T.angle}deg) ${r}`),r.length>0&&(this._enhanceTextSelection&&(T.originalTransform=r),D.style.transform=r),T.hasText&&this._container.appendChild(D),T.hasEOL){const l=document.createElement("br");l.setAttribute("role","presentation"),this._container.appendChild(l)}}_render(D=0){const T=(0,s.createPromiseCapability)();let r=Object.create(null);const l=this._document.createElement("canvas");if(l.height=l.width=U,l.mozOpaque=!0,this._layoutTextCtx=l.getContext("2d",{alpha:!1}),this._textContent){const x=this._textContent.items,F=this._textContent.styles;this._processItems(x,F),T.resolve()}else if(this._textContentStream){const x=()=>{this._reader.read().then(({value:F,done:C})=>{if(C){T.resolve();return}Object.assign(r,F.styles),this._processItems(F.items,r),x()},T.reject)};this._reader=this._textContentStream.getReader(),x()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');T.promise.then(()=>{r=null,D?this._renderTimer=setTimeout(()=>{a(this),this._renderTimer=null},D):a(this)},this._capability.reject)}expandTextDivs(D=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(p(this),this._bounds=null);const T=[],r=[];for(let l=0,x=this._textDivs.length;l<x;l++){const F=this._textDivs[l],C=this._textDivProperties.get(F);!C.hasText||(D?(T.length=0,r.length=0,C.originalTransform&&T.push(C.originalTransform),C.paddingTop>0?(r.push(`${C.paddingTop}px`),T.push(`translateY(${-C.paddingTop}px)`)):r.push(0),C.paddingRight>0?r.push(`${C.paddingRight/C.scale}px`):r.push(0),C.paddingBottom>0?r.push(`${C.paddingBottom}px`):r.push(0),C.paddingLeft>0?(r.push(`${C.paddingLeft/C.scale}px`),T.push(`translateX(${-C.paddingLeft/C.scale}px)`)):r.push(0),F.style.padding=r.join(" "),T.length&&(F.style.transform=T.join(" "))):(F.style.padding=null,F.style.transform=C.originalTransform))}}}function G(j){const D=new _({textContent:j.textContent,textContentStream:j.textContentStream,container:j.container,viewport:j.viewport,textDivs:j.textDivs,textContentItemsStr:j.textContentItemsStr,enhanceTextSelection:j.enhanceTextSelection});return D._render(j.timeout),D}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var s=k(1),B=k(5),U=k(3);let H=class{constructor(){(0,s.unreachable)("Not implemented: SVGGraphics")}};n.SVGGraphics=H;{let w=function(r){let l=[];const x=[];for(const F of r){if(F.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),x.push(l),l=l[l.length-1].items;continue}F.fn==="restore"?l=x.pop():l.push(F)}return l},_=function(r){if(Number.isInteger(r))return r.toString();const l=r.toFixed(10);let x=l.length-1;if(l[x]!=="0")return l;do x--;while(l[x]==="0");return l.substring(0,l[x]==="."?x:x+1)},G=function(r){if(r[4]===0&&r[5]===0){if(r[1]===0&&r[2]===0)return r[0]===1&&r[3]===1?"":`scale(${_(r[0])} ${_(r[3])})`;if(r[0]===r[3]&&r[1]===-r[2]){const l=Math.acos(r[0])*180/Math.PI;return`rotate(${_(l)})`}}else if(r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1)return`translate(${_(r[4])} ${_(r[5])})`;return`matrix(${_(r[0])} ${_(r[1])} ${_(r[2])} ${_(r[3])} ${_(r[4])} ${_(r[5])})`};const O={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},b="http://www.w3.org/XML/1998/namespace",e="http://www.w3.org/1999/xlink",c=["butt","round","square"],a=["miter","round","bevel"],g=function(r,l="",x=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!x)return URL.createObjectURL(new Blob([r],{type:l}));const F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${l};base64,`;for(let L=0,E=r.length;L<E;L+=3){const N=r[L]&255,X=r[L+1]&255,V=r[L+2]&255,Y=N>>2,tt=(N&3)<<4|X>>4,Q=L+1<E?(X&15)<<2|V>>6:64,A=L+2<E?V&63:64;C+=F[Y]+F[tt]+F[Q]+F[A]}return C},p=function(){const r=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,x=new Int32Array(256);for(let V=0;V<256;V++){let Y=V;for(let tt=0;tt<8;tt++)Y&1?Y=3988292384^Y>>1&2147483647:Y=Y>>1&2147483647;x[V]=Y}function F(V,Y,tt){let Q=-1;for(let A=Y;A<tt;A++){const o=(Q^V[A])&255,i=x[o];Q=Q>>>8^i}return Q^-1}function C(V,Y,tt,Q){let A=Q;const o=Y.length;tt[A]=o>>24&255,tt[A+1]=o>>16&255,tt[A+2]=o>>8&255,tt[A+3]=o&255,A+=4,tt[A]=V.charCodeAt(0)&255,tt[A+1]=V.charCodeAt(1)&255,tt[A+2]=V.charCodeAt(2)&255,tt[A+3]=V.charCodeAt(3)&255,A+=4,tt.set(Y,A),A+=Y.length;const i=F(tt,Q+4,A);tt[A]=i>>24&255,tt[A+1]=i>>16&255,tt[A+2]=i>>8&255,tt[A+3]=i&255}function L(V,Y,tt){let Q=1,A=0;for(let o=Y;o<tt;++o)Q=(Q+(V[o]&255))%65521,A=(A+Q)%65521;return A<<16|Q}function E(V){if(!U.isNodeJS)return N(V);try{let Y;parseInt(process.versions.node)>=8?Y=V:Y=Buffer.from(V);const tt=require("zlib").deflateSync(Y,{level:9});return tt instanceof Uint8Array?tt:new Uint8Array(tt)}catch(Y){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Y)}return N(V)}function N(V){let Y=V.length;const tt=65535,Q=Math.ceil(Y/tt),A=new Uint8Array(2+Y+Q*5+4);let o=0;A[o++]=120,A[o++]=156;let i=0;for(;Y>tt;)A[o++]=0,A[o++]=255,A[o++]=255,A[o++]=0,A[o++]=0,A.set(V.subarray(i,i+tt),o),o+=tt,i+=tt,Y-=tt;A[o++]=1,A[o++]=Y&255,A[o++]=Y>>8&255,A[o++]=~Y&65535&255,A[o++]=(~Y&65535)>>8&255,A.set(V.subarray(i),o),o+=V.length-i;const u=L(V,0,V.length);return A[o++]=u>>24&255,A[o++]=u>>16&255,A[o++]=u>>8&255,A[o++]=u&255,A}function X(V,Y,tt,Q){const A=V.width,o=V.height;let i,u,S;const v=V.data;switch(Y){case s.ImageKind.GRAYSCALE_1BPP:u=0,i=1,S=A+7>>3;break;case s.ImageKind.RGB_24BPP:u=2,i=8,S=A*3;break;case s.ImageKind.RGBA_32BPP:u=6,i=8,S=A*4;break;default:throw new Error("invalid format")}const P=new Uint8Array((1+S)*o);let t=0,f=0;for(let W=0;W<o;++W)P[t++]=0,P.set(v.subarray(f,f+S),t),f+=S,t+=S;if(Y===s.ImageKind.GRAYSCALE_1BPP&&Q){t=0;for(let W=0;W<o;W++){t++;for(let z=0;z<S;z++)P[t++]^=255}}const m=new Uint8Array([A>>24&255,A>>16&255,A>>8&255,A&255,o>>24&255,o>>16&255,o>>8&255,o&255,i,u,0,0,0]),y=E(P),h=r.length+l*3+m.length+y.length,M=new Uint8Array(h);let I=0;return M.set(r,I),I+=r.length,C("IHDR",m,M,I),I+=l+m.length,C("IDATA",y,M,I),I+=l+y.length,C("IEND",new Uint8Array(0),M,I),g(M,"image/png",tt)}return function(Y,tt,Q){const A=Y.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:Y.kind;return X(Y,A,tt,Q)}}();class R{constructor(){this.fontSizeScale=1,this.fontWeight=O.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=O.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,x){this.x=l,this.y=x}}let j=0,D=0,T=0;n.SVGGraphics=H=class{constructor(r,l,x=!1){this.svgFactory=new B.DOMSVGFactory,this.current=new R,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!x,this._operatorIdMapping=[];for(const F in s.OPS)this._operatorIdMapping[s.OPS[F]]=F}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const l=r.fnArray,x=r.argsArray;for(let F=0,C=l.length;F<C;F++)if(l[F]===s.OPS.dependency)for(const L of x[F]){const E=L.startsWith("g_")?this.commonObjs:this.objs,N=new Promise(X=>{E.get(L,X)});this.current.dependencies.push(N)}return Promise.all(this.current.dependencies)}transform(r,l,x,F,C,L){const E=[r,l,x,F,C,L];this.transformMatrix=s.Util.transform(this.transformMatrix,E),this.tgrp=null}getSVG(r,l){this.viewport=l;const x=this._initialize(l);return this.loadDependencies(r).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),x))}convertOpList(r){const l=this._operatorIdMapping,x=r.argsArray,F=r.fnArray,C=[];for(let L=0,E=F.length;L<E;L++){const N=F[L];C.push({fnId:N,fn:l[N],args:x[L]})}return w(C)}executeOpTree(r){for(const l of r){const x=l.fn,F=l.fnId,C=l.args;switch(F|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(C);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case s.OPS.setFont:this.setFont(C);break;case s.OPS.showText:this.showText(C[0]);break;case s.OPS.showSpacedText:this.showText(C[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(C[0],C[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case s.OPS.setHScale:this.setHScale(C[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case s.OPS.setTextRise:this.setTextRise(C[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case s.OPS.setLineWidth:this.setLineWidth(C[0]);break;case s.OPS.setLineJoin:this.setLineJoin(C[0]);break;case s.OPS.setLineCap:this.setLineCap(C[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case s.OPS.setFillColorN:this.setFillColorN(C);break;case s.OPS.shadingFill:this.shadingFill(C[0]);break;case s.OPS.setDash:this.setDash(C[0],C[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case s.OPS.setFlatness:this.setFlatness(C[0]);break;case s.OPS.setGState:this.setGState(C[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case s.OPS.constructPath:this.constructPath(C[0],C[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,s.warn)(`Unimplemented operator ${x}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,l,x,F,C,L){const E=this.current;E.textMatrix=E.lineMatrix=[r,l,x,F,C,L],E.textMatrixScale=Math.hypot(r,l),E.x=E.lineX=0,E.y=E.lineY=0,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${_(E.fontSize)}px`),E.tspan.setAttributeNS(null,"y",_(-E.y)),E.txtElement=this.svgFactory.createElement("svg:text"),E.txtElement.appendChild(E.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=s.IDENTITY_MATRIX,r.lineMatrix=s.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,l){const x=this.current;x.x=x.lineX+=r,x.y=x.lineY+=l,x.xcoords=[],x.ycoords=[],x.tspan=this.svgFactory.createElement("svg:tspan"),x.tspan.setAttributeNS(null,"font-family",x.fontFamily),x.tspan.setAttributeNS(null,"font-size",`${_(x.fontSize)}px`),x.tspan.setAttributeNS(null,"y",_(-x.y))}showText(r){const l=this.current,x=l.font,F=l.fontSize;if(F===0)return;const C=l.fontSizeScale,L=l.charSpacing,E=l.wordSpacing,N=l.fontDirection,X=l.textHScale*N,V=x.vertical,Y=V?1:-1,tt=x.defaultVMetrics,Q=F*l.fontMatrix[0];let A=0;for(const u of r){if(u===null){A+=N*E;continue}else if(typeof u=="number"){A+=Y*u*F/1e3;continue}const S=(u.isSpace?E:0)+L,v=u.fontChar;let P,t,f=u.width;if(V){let y;const h=u.vmetric||tt;y=u.vmetric?h[1]:f*.5,y=-y*Q;const M=h[2]*Q;f=h?-h[0]:f,P=y/C,t=(A+M)/C}else P=A/C,t=0;(u.isInFont||x.missingFile)&&(l.xcoords.push(l.x+P),V&&l.ycoords.push(-l.y+t),l.tspan.textContent+=v);let m;V?m=f*Q-S*N:m=f*Q+S*N,A+=m}l.tspan.setAttributeNS(null,"x",l.xcoords.map(_).join(" ")),V?l.tspan.setAttributeNS(null,"y",l.ycoords.map(_).join(" ")):l.tspan.setAttributeNS(null,"y",_(-l.y)),V?l.y-=A:l.x+=A*X,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${_(l.fontSize)}px`),l.fontStyle!==O.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==O.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const o=l.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(o===s.TextRenderingMode.FILL||o===s.TextRenderingMode.FILL_STROKE?(l.fillColor!==O.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),o===s.TextRenderingMode.STROKE||o===s.TextRenderingMode.FILL_STROKE){const u=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,u)}let i=l.textMatrix;l.textRise!==0&&(i=i.slice(),i[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${G(i)} scale(${_(X)}, -1)`),l.txtElement.setAttributeNS(b,"xml:space","preserve"),l.txtElement.appendChild(l.tspan),l.txtgrp.appendChild(l.txtElement),this._ensureTransformGroup().appendChild(l.txtElement)}setLeadingMoveText(r,l){this.setLeading(-l),this.moveText(r,l)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const l=g(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${l}); }
`}setFont(r){const l=this.current,x=this.commonObjs.get(r[0]);let F=r[1];l.font=x,this.embedFonts&&!x.missingFile&&!this.embeddedFonts[x.loadedName]&&(this.addFontStyle(x),this.embeddedFonts[x.loadedName]=x),l.fontMatrix=x.fontMatrix||s.FONT_IDENTITY_MATRIX;let C="normal";x.black?C="900":x.bold&&(C="bold");const L=x.italic?"italic":"normal";F<0?(F=-F,l.fontDirection=-1):l.fontDirection=1,l.fontSize=F,l.fontFamily=x.loadedName,l.fontWeight=C,l.fontStyle=L,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",_(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const r=this.current;r.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=r.txtElement)==null?void 0:l.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=c[r]}setLineJoin(r){this.current.lineJoin=a[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,l,x){this.current.strokeColor=s.Util.makeHexColor(r,l,x)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,l,x){this.current.fillColor=s.Util.makeHexColor(r,l,x),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const l=this.viewport.width,x=this.viewport.height,F=s.Util.inverseTransform(this.transformMatrix),C=s.Util.applyTransform([0,0],F),L=s.Util.applyTransform([0,x],F),E=s.Util.applyTransform([l,0],F),N=s.Util.applyTransform([l,x],F),X=Math.min(C[0],L[0],E[0],N[0]),V=Math.min(C[1],L[1],E[1],N[1]),Y=Math.max(C[0],L[0],E[0],N[0]),tt=Math.max(C[1],L[1],E[1],N[1]),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",X),Q.setAttributeNS(null,"y",V),Q.setAttributeNS(null,"width",Y-X),Q.setAttributeNS(null,"height",tt-V),Q.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(Q)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const l=r[1],x=r[2],F=r[3]||s.IDENTITY_MATRIX,[C,L,E,N]=r[4],X=r[5],V=r[6],Y=r[7],tt=`shading${T++}`,[Q,A,o,i]=s.Util.normalizeRect([...s.Util.applyTransform([C,L],F),...s.Util.applyTransform([E,N],F)]),[u,S]=s.Util.singularValueDecompose2dScale(F),v=X*u,P=V*S,t=this.svgFactory.createElement("svg:pattern");t.setAttributeNS(null,"id",tt),t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),t.setAttributeNS(null,"width",v),t.setAttributeNS(null,"height",P),t.setAttributeNS(null,"x",`${Q}`),t.setAttributeNS(null,"y",`${A}`);const f=this.svg,m=this.transformMatrix,y=this.current.fillColor,h=this.current.strokeColor,M=this.svgFactory.create(o-Q,i-A);if(this.svg=M,this.transformMatrix=F,Y===2){const I=s.Util.makeHexColor(...l);this.current.fillColor=I,this.current.strokeColor=I}return this.executeOpTree(this.convertOpList(x)),this.svg=f,this.transformMatrix=m,this.current.fillColor=y,this.current.strokeColor=h,t.appendChild(M.childNodes[0]),this.defs.appendChild(t),`url(#${tt})`}_makeShadingPattern(r){switch(typeof r=="string"&&(r=this.objs.get(r)),r[0]){case"RadialAxial":const l=`shading${T++}`,x=r[3];let F;switch(r[1]){case"axial":const C=r[4],L=r[5];F=this.svgFactory.createElement("svg:linearGradient"),F.setAttributeNS(null,"id",l),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"x1",C[0]),F.setAttributeNS(null,"y1",C[1]),F.setAttributeNS(null,"x2",L[0]),F.setAttributeNS(null,"y2",L[1]);break;case"radial":const E=r[4],N=r[5],X=r[6],V=r[7];F=this.svgFactory.createElement("svg:radialGradient"),F.setAttributeNS(null,"id",l),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"cx",N[0]),F.setAttributeNS(null,"cy",N[1]),F.setAttributeNS(null,"r",V),F.setAttributeNS(null,"fx",E[0]),F.setAttributeNS(null,"fy",E[1]),F.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const C of x){const L=this.svgFactory.createElement("svg:stop");L.setAttributeNS(null,"offset",C[0]),L.setAttributeNS(null,"stop-color",C[1]),F.appendChild(L)}return this.defs.appendChild(F),`url(#${l})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,l){this.current.dashArray=r,this.current.dashPhase=l}constructPath(r,l){const x=this.current;let F=x.x,C=x.y,L=[],E=0;for(const N of r)switch(N|0){case s.OPS.rectangle:F=l[E++],C=l[E++];const X=l[E++],V=l[E++],Y=F+X,tt=C+V;L.push("M",_(F),_(C),"L",_(Y),_(C),"L",_(Y),_(tt),"L",_(F),_(tt),"Z");break;case s.OPS.moveTo:F=l[E++],C=l[E++],L.push("M",_(F),_(C));break;case s.OPS.lineTo:F=l[E++],C=l[E++],L.push("L",_(F),_(C));break;case s.OPS.curveTo:F=l[E+4],C=l[E+5],L.push("C",_(l[E]),_(l[E+1]),_(l[E+2]),_(l[E+3]),_(F),_(C)),E+=6;break;case s.OPS.curveTo2:L.push("C",_(F),_(C),_(l[E]),_(l[E+1]),_(l[E+2]),_(l[E+3])),F=l[E+2],C=l[E+3],E+=4;break;case s.OPS.curveTo3:F=l[E+2],C=l[E+3],L.push("C",_(l[E]),_(l[E+1]),_(F),_(C),_(F),_(C)),E+=4;break;case s.OPS.closePath:L.push("Z");break}L=L.join(" "),x.path&&r.length>0&&r[0]!==s.OPS.rectangle&&r[0]!==s.OPS.moveTo?L=x.path.getAttributeNS(null,"d")+L:(x.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(x.path)),x.path.setAttributeNS(null,"d",L),x.path.setAttributeNS(null,"fill","none"),x.element=x.path,x.setCurrentPoint(F,C)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const l=`clippath${j++}`,x=this.svgFactory.createElement("svg:clipPath");x.setAttributeNS(null,"id",l),x.setAttributeNS(null,"transform",G(this.transformMatrix));const F=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?F.setAttributeNS(null,"clip-rule","evenodd"):F.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,x.appendChild(F),this.defs.appendChild(x),r.activeClipUrl){r.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;x.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const l=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",l)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[l,x]of r)switch(l){case"LW":this.setLineWidth(x);break;case"LC":this.setLineCap(x);break;case"LJ":this.setLineJoin(x);break;case"ML":this.setMiterLimit(x);break;case"D":this.setDash(x[0],x[1]);break;case"RI":this.setRenderingIntent(x);break;case"FL":this.setFlatness(x);break;case"Font":this.setFont(x);break;case"CA":this.setStrokeAlpha(x);break;case"ca":this.setFillAlpha(x);break;default:(0,s.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,l=1){const x=this.current;let F=x.dashArray;l!==1&&F.length>0&&(F=F.map(function(C){return l*C})),r.setAttributeNS(null,"stroke",x.strokeColor),r.setAttributeNS(null,"stroke-opacity",x.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",_(x.miterLimit)),r.setAttributeNS(null,"stroke-linecap",x.lineCap),r.setAttributeNS(null,"stroke-linejoin",x.lineJoin),r.setAttributeNS(null,"stroke-width",_(l*x.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",F.map(_).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",_(l*x.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(r)}paintImageXObject(r){const l=r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r);if(!l){(0,s.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(r,l){const x=r.width,F=r.height,C=p(r,this.forceDataSchema,!!l),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",_(x)),L.setAttributeNS(null,"height",_(F)),this.current.element=L,this.clip("nonzero");const E=this.svgFactory.createElement("svg:image");E.setAttributeNS(e,"xlink:href",C),E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y",_(-F)),E.setAttributeNS(null,"width",_(x)+"px"),E.setAttributeNS(null,"height",_(F)+"px"),E.setAttributeNS(null,"transform",`scale(${_(1/x)} ${_(-1/F)})`),l?l.appendChild(E):this._ensureTransformGroup().appendChild(E)}paintImageMaskXObject(r){const l=this.current,x=r.width,F=r.height,C=l.fillColor;l.maskId=`mask${D++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",l.maskId);const E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",_(x)),E.setAttributeNS(null,"height",_(F)),E.setAttributeNS(null,"fill",C),E.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.appendChild(L),this._ensureTransformGroup().appendChild(E),this.paintInlineImageXObject(r,L)}paintFormXObjectBegin(r,l){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),l){const x=l[2]-l[0],F=l[3]-l[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",l[0]),C.setAttributeNS(null,"y",l[1]),C.setAttributeNS(null,"width",_(x)),C.setAttributeNS(null,"height",_(F)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const l=this.svgFactory.create(r.width,r.height),x=this.svgFactory.createElement("svg:defs");l.appendChild(x),this.defs=x;const F=this.svgFactory.createElement("svg:g");return F.setAttributeNS(null,"transform",G(r.transform)),l.appendChild(F),this.svg=F,l}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",G(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var s=k(1),B=k(24);const U=require$$4,H=require$$4,O=require$$4,b=require$$4,e=/^file:\/\/\/[a-zA-Z]:\//;function c(D){const T=b.parse(D);return T.protocol==="file:"||T.host?T:/^[a-z]:[/\\]/i.test(D)?b.parse(`file:///${D}`):(T.host||(T.protocol="file:"),T)}class a{constructor(T){this.source=T,this.url=c(T.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T,r;return(r=(T=this._fullRequestReader)==null?void 0:T._loaded)!=null?r:0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new G(this):new w(this),this._fullRequestReader}getRangeReader(T,r){if(r<=this._progressiveDataLength)return null;const l=this.isFsUrl?new j(this,T,r):new _(this,T,r);return this._rangeRequestReaders.push(l),l}cancelAllRequests(T){this._fullRequestReader&&this._fullRequestReader.cancel(T);for(const r of this._rangeRequestReaders.slice(0))r.cancel(T)}}n.PDFNodeStream=a;class g{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=T.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)(),this._headersCapability=(0,s.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=(0,s.createPromiseCapability)(),this.read()):(this._loaded+=T.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class p{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)();const r=T.source;this._isStreamingSupported=!r.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=(0,s.createPromiseCapability)(),this.read()):(this._loaded+=T.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function R(D,T){return{protocol:D.protocol,auth:D.auth,host:D.hostname,port:D.port,path:D.path,method:"GET",headers:T}}class w extends g{constructor(T){super(T);const r=l=>{if(l.statusCode===404){const L=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(l);const x=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:F,suggestedLength:C}=(0,B.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:T.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=F,this._contentLength=C||this._contentLength,this._filename=(0,B.extractFilenameFromHeader)(x)};this._request=null,this._url.protocol==="http:"?this._request=H.request(R(this._url,T.httpHeaders),r):this._request=O.request(R(this._url,T.httpHeaders),r),this._request.on("error",l=>{this._storedError=l,this._headersCapability.reject(l)}),this._request.end()}}class _ extends p{constructor(T,r,l){super(T);this._httpHeaders={};for(const F in T.httpHeaders){const C=T.httpHeaders[F];typeof C!="undefined"&&(this._httpHeaders[F]=C)}this._httpHeaders.Range=`bytes=${r}-${l-1}`;const x=F=>{if(F.statusCode===404){const C=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(F)};this._request=null,this._url.protocol==="http:"?this._request=H.request(R(this._url,this._httpHeaders),x):this._request=O.request(R(this._url,this._httpHeaders),x),this._request.on("error",F=>{this._storedError=F}),this._request.end()}}class G extends g{constructor(T){super(T);let r=decodeURIComponent(this._url.path);e.test(this._url.href)&&(r=r.replace(/^\//,"")),U.lstat(r,(l,x)=>{if(l){l.code==="ENOENT"&&(l=new s.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=l,this._headersCapability.reject(l);return}this._contentLength=x.size,this._setReadableStream(U.createReadStream(r)),this._headersCapability.resolve()})}}class j extends p{constructor(T,r,l){super(T);let x=decodeURIComponent(this._url.path);e.test(this._url.href)&&(x=x.replace(/^\//,"")),this._setReadableStream(U.createReadStream(x,{start:r,end:l-1}))}}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=b,n.extractFilenameFromHeader=O,n.validateRangeRequestCapabilities=H,n.validateResponseStatus=e;var s=k(1),B=k(25),U=k(5);function H({getResponseHeader:c,isHttp:a,rangeChunkSize:g,disableRange:p}){(0,s.assert)(g>0,"Range chunk size must be larger than zero");const R={allowRangeRequests:!1,suggestedLength:void 0},w=parseInt(c("Content-Length"),10);return!Number.isInteger(w)||(R.suggestedLength=w,w<=2*g)||p||!a||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(R.allowRangeRequests=!0),R}function O(c){const a=c("Content-Disposition");if(a){let g=(0,B.getFilenameFromContentDispositionHeader)(a);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,U.isPdfFile)(g))return g}return null}function b(c,a){return c===404||c===0&&a.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+a+'".'):new s.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${a}".`,c)}function e(c){return c===200||c===206}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=B;var s=k(1);function B(U){let H=!0,O=b("filename\\*","i").exec(U);if(O){O=O[1];let w=g(O);return w=unescape(w),w=p(w),w=R(w),c(w)}if(O=a(U),O){const w=R(O);return c(w)}if(O=b("filename","i").exec(U),O){O=O[1];let w=g(O);return w=R(w),c(w)}function b(w,_){return new RegExp("(?:^|;)\\s*"+w+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function e(w,_){if(w){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const G=new TextDecoder(w,{fatal:!0}),j=(0,s.stringToBytes)(_);_=G.decode(j),H=!1}catch{}}return _}function c(w){return H&&/[\x80-\xff]/.test(w)&&(w=e("utf-8",w),H&&(w=e("iso-8859-1",w))),w}function a(w){const _=[];let G;const j=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(G=j.exec(w))!==null;){let[,T,r,l]=G;if(T=parseInt(T,10),T in _){if(T===0)break;continue}_[T]=[r,l]}const D=[];for(let T=0;T<_.length&&T in _;++T){let[r,l]=_[T];l=g(l),r&&(l=unescape(l),T===0&&(l=p(l))),D.push(l)}return D.join("")}function g(w){if(w.startsWith('"')){const _=w.slice(1).split('\\"');for(let G=0;G<_.length;++G){const j=_[G].indexOf('"');j!==-1&&(_[G]=_[G].slice(0,j),_.length=G+1),_[G]=_[G].replace(/\\(.)/g,"$1")}w=_.join('"')}return w}function p(w){const _=w.indexOf("'");if(_===-1)return w;const G=w.slice(0,_),D=w.slice(_+1).replace(/^[^']*'/,"");return e(G,D)}function R(w){return!w.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(w)?w:w.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,G,j,D){if(j==="q"||j==="Q")return D=D.replace(/_/g," "),D=D.replace(/=([0-9a-fA-F]{2})/g,function(T,r){return String.fromCharCode(parseInt(r,16))}),e(G,D);try{D=atob(D)}catch{}return e(G,D)})}return""}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var s=k(1),B=k(24);const U=200,H=206;function O(g){const p=g.response;return typeof p!="string"?p:(0,s.stringToBytes)(p).buffer}class b{constructor(p,R={}){this.url=p,this.isHttp=/^https?:/i.test(p),this.httpHeaders=this.isHttp&&R.httpHeaders||Object.create(null),this.withCredentials=R.withCredentials||!1,this.getXhr=R.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(p,R,w){const _={begin:p,end:R};for(const G in w)_[G]=w[G];return this.request(_)}requestFull(p){return this.request(p)}request(p){const R=this.getXhr(),w=this.currXhrId++,_=this.pendingRequests[w]={xhr:R};R.open("GET",this.url),R.withCredentials=this.withCredentials;for(const G in this.httpHeaders){const j=this.httpHeaders[G];typeof j!="undefined"&&R.setRequestHeader(G,j)}return this.isHttp&&"begin"in p&&"end"in p?(R.setRequestHeader("Range",`bytes=${p.begin}-${p.end-1}`),_.expectedStatus=H):_.expectedStatus=U,R.responseType="arraybuffer",p.onError&&(R.onerror=function(G){p.onError(R.status)}),R.onreadystatechange=this.onStateChange.bind(this,w),R.onprogress=this.onProgress.bind(this,w),_.onHeadersReceived=p.onHeadersReceived,_.onDone=p.onDone,_.onError=p.onError,_.onProgress=p.onProgress,R.send(null),w}onProgress(p,R){var _;const w=this.pendingRequests[p];!w||(_=w.onProgress)==null||_.call(w,R)}onStateChange(p,R){var T,r,l;const w=this.pendingRequests[p];if(!w)return;const _=w.xhr;if(_.readyState>=2&&w.onHeadersReceived&&(w.onHeadersReceived(),delete w.onHeadersReceived),_.readyState!==4||!(p in this.pendingRequests))return;if(delete this.pendingRequests[p],_.status===0&&this.isHttp){(T=w.onError)==null||T.call(w,_.status);return}const G=_.status||U;if(!(G===U&&w.expectedStatus===H)&&G!==w.expectedStatus){(r=w.onError)==null||r.call(w,_.status);return}const D=O(_);if(G===H){const x=_.getResponseHeader("Content-Range"),F=/bytes (\d+)-(\d+)\/(\d+)/.exec(x);w.onDone({begin:parseInt(F[1],10),chunk:D})}else D?w.onDone({begin:0,chunk:D}):(l=w.onError)==null||l.call(w,_.status)}getRequestXhr(p){return this.pendingRequests[p].xhr}isPendingRequest(p){return p in this.pendingRequests}abortRequest(p){const R=this.pendingRequests[p].xhr;delete this.pendingRequests[p],R.abort()}}class e{constructor(p){this._source=p,this._manager=new b(p.url,{httpHeaders:p.httpHeaders,withCredentials:p.withCredentials}),this._rangeChunkSize=p.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(p){const R=this._rangeRequestReaders.indexOf(p);R>=0&&this._rangeRequestReaders.splice(R,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(p,R){const w=new a(this._manager,p,R);return w.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(w),w}cancelAllRequests(p){var R;(R=this._fullRequestReader)==null||R.cancel(p);for(const w of this._rangeRequestReaders.slice(0))w.cancel(p)}}n.PDFNetworkStream=e;class c{constructor(p,R){this._manager=p;const w={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._fullRequestId=p.requestFull(w),this._headersReceivedCapability=(0,s.createPromiseCapability)(),this._disableRange=R.disableRange||!1,this._contentLength=R.length,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const p=this._fullRequestId,R=this._manager.getRequestXhr(p),w=j=>R.getResponseHeader(j),{allowRangeRequests:_,suggestedLength:G}=(0,B.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=G||this._contentLength,this._filename=(0,B.extractFilenameFromHeader)(w),this._isRangeSupported&&this._manager.abortRequest(p),this._headersReceivedCapability.resolve()}_onDone(p){if(p&&(this._requests.length>0?this._requests.shift().resolve({value:p.chunk,done:!1}):this._cachedChunks.push(p.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(p){this._storedError=(0,B.createResponseStatusError)(p,this._url),this._headersReceivedCapability.reject(this._storedError);for(const R of this._requests)R.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(p){var R;(R=this.onProgress)==null||R.call(this,{loaded:p.loaded,total:p.lengthComputable?p.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const p=(0,s.createPromiseCapability)();return this._requests.push(p),p.promise}cancel(p){this._done=!0,this._headersReceivedCapability.reject(p);for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(p,R,w){this._manager=p;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._requestId=p.requestRange(R,w,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var p;(p=this.onClosed)==null||p.call(this,this)}_onDone(p){const R=p.chunk;this._requests.length>0?this._requests.shift().resolve({value:R,done:!1}):this._queuedChunk=R,this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(p){this._storedError=(0,B.createResponseStatusError)(p,this._url);for(const R of this._requests)R.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(p){var R;this.isStreamingSupported||(R=this.onProgress)==null||R.call(this,{loaded:p.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const R=this._queuedChunk;return this._queuedChunk=null,{value:R,done:!1}}if(this._done)return{value:void 0,done:!0};const p=(0,s.createPromiseCapability)();return this._requests.push(p),p.promise}cancel(p){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(d,n,k)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var s=k(1),B=k(24);function U(c,a,g){return{method:"GET",headers:c,signal:g==null?void 0:g.signal,mode:"cors",credentials:a?"include":"same-origin",redirect:"follow"}}function H(c){const a=new Headers;for(const g in c){const p=c[g];typeof p!="undefined"&&a.append(g,p)}return a}class O{constructor(a){this.source=a,this.isHttp=/^https?:/i.test(a.url),this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var a,g;return(g=(a=this._fullRequestReader)==null?void 0:a._loaded)!=null?g:0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(a,g){if(g<=this._progressiveDataLength)return null;const p=new e(this,a,g);return this._rangeRequestReaders.push(p),p}cancelAllRequests(a){this._fullRequestReader&&this._fullRequestReader.cancel(a);for(const g of this._rangeRequestReaders.slice(0))g.cancel(a)}}n.PDFFetchStream=O;class b{constructor(a){this._stream=a,this._reader=null,this._loaded=0,this._filename=null;const g=a.source;this._withCredentials=g.withCredentials||!1,this._contentLength=g.length,this._headersCapability=(0,s.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._headers=H(this._stream.httpHeaders);const p=g.url;fetch(p,U(this._headers,this._withCredentials,this._abortController)).then(R=>{if(!(0,B.validateResponseStatus)(R.status))throw(0,B.createResponseStatusError)(R.status,p);this._reader=R.body.getReader(),this._headersCapability.resolve();const w=j=>R.headers.get(j),{allowRangeRequests:_,suggestedLength:G}=(0,B.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=G||this._contentLength,this._filename=(0,B.extractFilenameFromHeader)(w),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:a,done:g}=await this._reader.read();return g?{value:a,done:g}:(this._loaded+=a.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){this._reader&&this._reader.cancel(a),this._abortController&&this._abortController.abort()}}class e{constructor(a,g,p){this._stream=a,this._reader=null,this._loaded=0;const R=a.source;this._withCredentials=R.withCredentials||!1,this._readCapability=(0,s.createPromiseCapability)(),this._isStreamingSupported=!R.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=H(this._stream.httpHeaders),this._headers.append("Range",`bytes=${g}-${p-1}`);const w=R.url;fetch(w,U(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,B.validateResponseStatus)(_.status))throw(0,B.createResponseStatusError)(_.status,w);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:a,done:g}=await this._reader.read();return g?{value:a,done:g}:(this._loaded+=a.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){this._reader&&this._reader.cancel(a),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(d){var n=__webpack_module_cache__[d];if(n!==void 0)return n.exports;var k=__webpack_module_cache__[d]={exports:{}};return __webpack_modules__[d](k,k.exports,__w_pdfjs_require__),k.exports}var __webpack_exports__={};return(()=>{var d=__webpack_exports__;Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"AnnotationLayer",{enumerable:!0,get:function(){return B.AnnotationLayer}}),Object.defineProperty(d,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(d,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(d,"GlobalWorkerOptions",{enumerable:!0,get:function(){return U.GlobalWorkerOptions}}),Object.defineProperty(d,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(d,"LoopbackPort",{enumerable:!0,get:function(){return k.LoopbackPort}}),Object.defineProperty(d,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(d,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(d,"PDFDataRangeTransport",{enumerable:!0,get:function(){return k.PDFDataRangeTransport}}),Object.defineProperty(d,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(d,"PDFWorker",{enumerable:!0,get:function(){return k.PDFWorker}}),Object.defineProperty(d,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(d,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(d,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(d,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(d,"SVGGraphics",{enumerable:!0,get:function(){return b.SVGGraphics}}),Object.defineProperty(d,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return n.UNSUPPORTED_FEATURES}}),Object.defineProperty(d,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(d,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(d,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(d,"XfaLayer",{enumerable:!0,get:function(){return e.XfaLayer}}),Object.defineProperty(d,"build",{enumerable:!0,get:function(){return k.build}}),Object.defineProperty(d,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(d,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(d,"getDocument",{enumerable:!0,get:function(){return k.getDocument}}),Object.defineProperty(d,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(d,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(d,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(d,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(d,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(d,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(d,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(d,"version",{enumerable:!0,get:function(){return k.version}});var n=__w_pdfjs_require__(1),k=__w_pdfjs_require__(4),s=__w_pdfjs_require__(5),B=__w_pdfjs_require__(18),U=__w_pdfjs_require__(12),H=__w_pdfjs_require__(3),O=__w_pdfjs_require__(21),b=__w_pdfjs_require__(22),e=__w_pdfjs_require__(20);if(H.isNodeJS){const{PDFNodeStream:c}=__w_pdfjs_require__(23);(0,k.setPDFNetworkStreamFactory)(a=>new c(a))}else{const{PDFNetworkStream:c}=__w_pdfjs_require__(26),{PDFFetchStream:a}=__w_pdfjs_require__(27);(0,k.setPDFNetworkStreamFactory)(g=>(0,s.isValidFetchUrl)(g.url)?new a(g):new c(g))}})(),__webpack_exports__})()})})(pdf);export{binding_callbacks as $,get_spread_object as A,destroy_component as B,assign as C,writable as D,tick as E,create_slot as F,update_slot_base as G,get_all_dirty_from_scope as H,get_slot_changes as I,append_hydration as J,noop as K,set_input_value as L,listen as M,to_number as N,run_all as O,pdf as P,workerSrc as Q,readable as R,SvelteComponent as S,component_subscribe as T,createEventDispatcher as U,onDestroy as V,not_equal as W,handle_promise as X,update_await_block_branch as Y,getContext as Z,destroy_each as _,children as a,attr as b,claim_element as c,detach as d,element as e,set_style as f,insert_hydration as g,claim_text as h,init as i,set_data as j,space as k,empty as l,claim_space as m,group_outros as n,transition_out as o,check_outros as p,transition_in as q,setContext as r,safe_not_equal as s,text as t,afterUpdate as u,onMount as v,create_component as w,claim_component as x,mount_component as y,get_spread_update as z};
