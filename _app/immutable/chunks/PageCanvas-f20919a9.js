import{S as y,i as C,s as x,k as g,l as v,m as p,h,n as _,b,A as d,X as k,F as S,f as u,g as T,t as m,d as q,v as A,w as L,x as V,y as D,z as I}from"./index-ca1e3c02.js";import{p as E}from"./worker-3abca82c.js";function P(r){let e;return{c(){e=g("div"),this.h()},l(n){e=v(n,"DIV",{class:!0}),p(e).forEach(h),this.h()},h(){_(e,"class","svelte-1d0eva")},m(n,a){b(n,e,a),r[3](e)},p:d,i:d,o:d,d(n){n&&h(e),r[3](null)}}}function z(r,e,n){let{page:a}=e,{viewport:s}=e,l,t;function i(){for(l==null||l.cancel();t.firstChild;)t.firstChild.remove();l=E.exports.renderTextLayer({container:t,textContentStream:a.streamTextContent(),viewport:s})}function o(f){k[f?"unshift":"push"](()=>{t=f,n(0,t)})}return r.$$set=f=>{"page"in f&&n(1,a=f.page),"viewport"in f&&n(2,s=f.viewport)},r.$$.update=()=>{r.$$.dirty&5&&t&&s&&i()},[t,a,s,o]}class F extends y{constructor(e){super(),C(this,e,z,P,x,{page:1,viewport:2})}}function w(r){let e,n;return e=new F({props:{page:r[0],viewport:r[1]}}),{c(){A(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,s){V(e,a,s),n=!0},p(a,s){const l={};s&1&&(l.page=a[0]),s&2&&(l.viewport=a[1]),e.$set(l)},i(a){n||(u(e.$$.fragment,a),n=!0)},o(a){m(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function N(r){let e,n,a,s,l,t=r[2]&&w(r);return{c(){e=g("div"),n=g("canvas"),t&&t.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var o=p(e);n=v(o,"CANVAS",{width:!0,height:!0,class:!0}),p(n).forEach(h),t&&t.l(o),o.forEach(h),this.h()},h(){var i,o;_(n,"width",a=(i=r[1])==null?void 0:i.width),_(n,"height",s=(o=r[1])==null?void 0:o.height),_(n,"class","svelte-oqog55"),_(e,"class","svelte-oqog55")},m(i,o){b(i,e,o),S(e,n),r[4](n),t&&t.m(e,null),l=!0},p(i,[o]){var f,c;(!l||o&2&&a!==(a=(f=i[1])==null?void 0:f.width))&&_(n,"width",a),(!l||o&2&&s!==(s=(c=i[1])==null?void 0:c.height))&&_(n,"height",s),i[2]?t?(t.p(i,o),o&4&&u(t,1)):(t=w(i),t.c(),u(t,1),t.m(e,null)):t&&(T(),m(t,1,1,()=>{t=null}),q())},i(i){l||(u(t),l=!0)},o(i){m(t),l=!1},d(i){i&&h(e),r[4](null),t&&t.d()}}}function R(r,e,n){let{page:a}=e,{viewport:s}=e,{render_text_layer:l}=e,t,i;async function o(){i==null||i.cancel(),await I(),i=a.render({canvasContext:t.getContext("2d"),viewport:s});try{await i.promise}catch(c){if(!(c instanceof E.exports.RenderingCancelledException))throw c}}function f(c){k[c?"unshift":"push"](()=>{t=c,n(3,t)})}return r.$$set=c=>{"page"in c&&n(0,a=c.page),"viewport"in c&&n(1,s=c.viewport),"render_text_layer"in c&&n(2,l=c.render_text_layer)},r.$$.update=()=>{r.$$.dirty&10&&s&&t&&o()},[a,s,l,t,f]}class B extends y{constructor(e){super(),C(this,e,R,N,x,{page:0,viewport:1,render_text_layer:2})}}export{B as default};
